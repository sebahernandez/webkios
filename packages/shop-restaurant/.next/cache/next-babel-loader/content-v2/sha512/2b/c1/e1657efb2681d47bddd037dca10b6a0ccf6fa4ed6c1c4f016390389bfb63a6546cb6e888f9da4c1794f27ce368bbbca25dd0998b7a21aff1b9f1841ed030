{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/features/coupon/coupon.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useState } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { CouponBoxWrapper, Error } from './coupon.style';\nimport { Input } from 'components/forms/input';\nimport { Button } from 'components/button/button';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { useMutation } from '@apollo/client';\nimport { APPLY_COUPON } from 'graphql/mutation/coupon';\n\nconst Coupon = (_ref) => {\n  let {\n    disabled,\n    className,\n    style,\n    errorMsgFixed = false\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"disabled\", \"className\", \"style\", \"errorMsgFixed\"]);\n\n  const intl = useIntl();\n  const {\n    applyCoupon\n  } = useCart();\n  const {\n    0: code,\n    1: setCode\n  } = useState('');\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n  const [appliedCoupon] = useMutation(APPLY_COUPON);\n\n  const handleApplyCoupon = async () => {\n    const {\n      data\n    } = await appliedCoupon({\n      variables: {\n        code\n      }\n    });\n\n    if (data.applyCoupon && data.applyCoupon.discountInPercent) {\n      setError('');\n      applyCoupon(data.applyCoupon);\n      setCode('');\n    } else {\n      setError('Invalid Coupon');\n    }\n  };\n\n  const handleOnChange = e => {\n    setCode(e.currentTarget.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CouponBoxWrapper, {\n      className: className ? className : 'boxedCoupon',\n      style: style,\n      children: [/*#__PURE__*/_jsxDEV(Input, _objectSpread({\n        onChange: handleOnChange,\n        value: code,\n        placeholder: intl.formatMessage({\n          id: 'couponPlaceholder',\n          defaultMessage: 'Ingresar Cupón Aquí'\n        })\n      }, props), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"button\",\n        onClick: handleApplyCoupon,\n        disabled: disabled,\n        padding: \"0 30px\",\n        children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n          id: \"voucherApply\",\n          defaultMessage: \"Apply\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Error, {\n      errorMsgFixed: errorMsgFixed,\n      children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n        id: \"couponError\",\n        defaultMessage: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\nexport default Coupon;","map":{"version":3,"sources":["/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/features/coupon/coupon.tsx"],"names":["React","useState","FormattedMessage","useIntl","CouponBoxWrapper","Error","Input","Button","useCart","useMutation","APPLY_COUPON","Coupon","disabled","className","style","errorMsgFixed","props","intl","applyCoupon","code","setCode","error","setError","appliedCoupon","handleApplyCoupon","data","variables","discountInPercent","handleOnChange","e","currentTarget","value","formatMessage","id","defaultMessage"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,gBAAT,EAA2BC,OAA3B,QAA0C,YAA1C;AACA,SAASC,gBAAT,EAA2BC,KAA3B,QAAwC,gBAAxC;AACA,SAASC,KAAT,QAAsB,wBAAtB;AACA,SAASC,MAAT,QAAuB,0BAAvB;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,YAAT,QAA6B,yBAA7B;;AASA,MAAMC,MAA6B,GAAG,UAMhC;AAAA,MANiC;AACrCC,IAAAA,QADqC;AAErCC,IAAAA,SAFqC;AAGrCC,IAAAA,KAHqC;AAIrCC,IAAAA,aAAa,GAAG;AAJqB,GAMjC;AAAA,MADDC,KACC;;AACJ,QAAMC,IAAI,GAAGd,OAAO,EAApB;AACA,QAAM;AAAEe,IAAAA;AAAF,MAAkBV,OAAO,EAA/B;AACA,QAAM;AAAA,OAACW,IAAD;AAAA,OAAOC;AAAP,MAAkBnB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM;AAAA,OAACoB,KAAD;AAAA,OAAQC;AAAR,MAAoBrB,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACsB,aAAD,IAAkBd,WAAW,CAACC,YAAD,CAAnC;;AAEA,QAAMc,iBAAiB,GAAG,YAAY;AACpC,UAAM;AAAEC,MAAAA;AAAF,QAAgB,MAAMF,aAAa,CAAC;AACxCG,MAAAA,SAAS,EAAE;AAAEP,QAAAA;AAAF;AAD6B,KAAD,CAAzC;;AAGA,QAAIM,IAAI,CAACP,WAAL,IAAoBO,IAAI,CAACP,WAAL,CAAiBS,iBAAzC,EAA4D;AAC1DL,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACAJ,MAAAA,WAAW,CAACO,IAAI,CAACP,WAAN,CAAX;AACAE,MAAAA,OAAO,CAAC,EAAD,CAAP;AACD,KAJD,MAIO;AACLE,MAAAA,QAAQ,CAAC,gBAAD,CAAR;AACD;AACF,GAXD;;AAYA,QAAMM,cAA0D,GAAIC,CAAD,IAAO;AACxET,IAAAA,OAAO,CAACS,CAAC,CAACC,aAAF,CAAgBC,KAAjB,CAAP;AACD,GAFD;;AAGA,sBACE;AAAA,4BACE,QAAC,gBAAD;AACE,MAAA,SAAS,EAAElB,SAAS,GAAGA,SAAH,GAAe,aADrC;AAEE,MAAA,KAAK,EAAEC,KAFT;AAAA,8BAIE,QAAC,KAAD;AACE,QAAA,QAAQ,EAAEc,cADZ;AAEE,QAAA,KAAK,EAAET,IAFT;AAGE,QAAA,WAAW,EAAEF,IAAI,CAACe,aAAL,CAAmB;AAC9BC,UAAAA,EAAE,EAAE,mBAD0B;AAE9BC,UAAAA,cAAc,EAAE;AAFc,SAAnB;AAHf,SAOMlB,KAPN;AAAA;AAAA;AAAA;AAAA,cAJF,eAaE,QAAC,MAAD;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,OAAO,EAAEQ,iBAFX;AAGE,QAAA,QAAQ,EAAEZ,QAHZ;AAIE,QAAA,OAAO,EAAC,QAJV;AAAA,+BAME,QAAC,gBAAD;AAAkB,UAAA,EAAE,EAAC,cAArB;AAAoC,UAAA,cAAc,EAAC;AAAnD;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,cAbF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAuBGS,KAAK,iBACJ,QAAC,KAAD;AAAO,MAAA,aAAa,EAAEN,aAAtB;AAAA,6BACE,QAAC,gBAAD;AAAkB,QAAA,EAAE,EAAC,aAArB;AAAmC,QAAA,cAAc,EAAEM;AAAnD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAxBJ;AAAA,kBADF;AA+BD,CA3DD;;AA6DA,eAAeV,MAAf","sourcesContent":["import React, { useState } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { CouponBoxWrapper, Error } from './coupon.style';\nimport { Input } from 'components/forms/input';\nimport { Button } from 'components/button/button';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { useMutation } from '@apollo/client';\nimport { APPLY_COUPON } from 'graphql/mutation/coupon';\n\ntype CouponProps = {\n  disabled?: any;\n  className?: string;\n  style?: any;\n  errorMsgFixed?: boolean;\n};\n\nconst Coupon: React.FC<CouponProps> = ({\n  disabled,\n  className,\n  style,\n  errorMsgFixed = false,\n  ...props\n}) => {\n  const intl = useIntl();\n  const { applyCoupon } = useCart();\n  const [code, setCode] = useState('');\n  const [error, setError] = useState(null);\n  const [appliedCoupon] = useMutation(APPLY_COUPON);\n\n  const handleApplyCoupon = async () => {\n    const { data }: any = await appliedCoupon({\n      variables: { code },\n    });\n    if (data.applyCoupon && data.applyCoupon.discountInPercent) {\n      setError('');\n      applyCoupon(data.applyCoupon);\n      setCode('');\n    } else {\n      setError('Invalid Coupon');\n    }\n  };\n  const handleOnChange: React.ChangeEventHandler<HTMLInputElement> = (e) => {\n    setCode(e.currentTarget.value);\n  };\n  return (\n    <>\n      <CouponBoxWrapper\n        className={className ? className : 'boxedCoupon'}\n        style={style}\n      >\n        <Input\n          onChange={handleOnChange}\n          value={code}\n          placeholder={intl.formatMessage({\n            id: 'couponPlaceholder',\n            defaultMessage: 'Ingresar Cupón Aquí',\n          })}\n          {...props}\n        />\n        <Button\n          type='button'\n          onClick={handleApplyCoupon}\n          disabled={disabled}\n          padding='0 30px'\n        >\n          <FormattedMessage id='voucherApply' defaultMessage='Apply' />\n        </Button>\n      </CouponBoxWrapper>\n      {error && (\n        <Error errorMsgFixed={errorMsgFixed}>\n          <FormattedMessage id='couponError' defaultMessage={error} />\n        </Error>\n      )}\n    </>\n  );\n};\n\nexport default Coupon;\n"]},"metadata":{},"sourceType":"module"}
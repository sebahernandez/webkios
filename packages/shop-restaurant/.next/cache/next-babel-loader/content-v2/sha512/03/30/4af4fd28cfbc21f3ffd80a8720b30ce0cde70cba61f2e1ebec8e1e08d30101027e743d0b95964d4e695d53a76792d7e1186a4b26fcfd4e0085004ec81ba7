{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/alejandrosandoval/space/world_eserp/web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/alejandrosandoval/space/world_eserp/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/alejandrosandoval/space/world_eserp/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useContext } from 'react';\nimport Link from 'next/link';\nimport { Input } from 'components/forms/input';\nimport { Button, IconWrapper, Wrapper, Container, Heading, SubHeading, HelperText, Offer // Input,\n, Divider, LinkButton } from './authentication-form.style';\nimport { Facebook } from 'assets/icons/facebook';\nimport { Google } from 'assets/icons/google';\nimport { AuthContext } from 'contexts/auth/auth.context';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { useQuery, useMutation } from '@apollo/client';\nimport { GET_CLIENTE_USERNAME } from '../../utils/graphql/query/clients.query';\nimport { ADD_CLIENTE } from '../../utils/graphql/mutation/register_client';\nexport default function SignOutModal(_ref) {\n  var cid = _ref.cid;\n  var intl = useIntl();\n\n  var _React$useState = React.useState(''),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      email = _React$useState2[0],\n      setEmail = _React$useState2[1];\n\n  var _React$useState3 = React.useState(''),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      password = _React$useState4[0],\n      setPassword = _React$useState4[1];\n\n  var _useContext = useContext(AuthContext),\n      authDispatch = _useContext.authDispatch;\n\n  var _useMutation = useMutation(ADD_CLIENTE),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      addCliente = _useMutation2[0],\n      error = _useMutation2[1];\n\n  var _useQuery = useQuery(GET_CLIENTE_USERNAME, {\n    variables: {\n      clientid: cid,\n      username: email\n    }\n  }),\n      data = _useQuery.data,\n      loading = _useQuery.loading;\n\n  var toggleSignInForm = function toggleSignInForm() {\n    authDispatch({\n      type: 'SIGNIN'\n    });\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(data && data.cliente.length > 0)) {\n                _context.next = 5;\n                break;\n              }\n\n              console.log('usuario YA existe');\n              alert('usuario YA existe');\n              _context.next = 11;\n              break;\n\n            case 5:\n              console.log('usuario NO existe');\n              _context.next = 8;\n              return addCliente({\n                variables: {\n                  password: password,\n                  username: email,\n                  clientid: cid\n                }\n              });\n\n            case 8:\n              if (error) {\n                console.log('hubo un error', error);\n              }\n\n              alert('grabo exitosamente');\n              authDispatch({\n                type: 'SIGNIN'\n              });\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(Wrapper, {\n    children: /*#__PURE__*/_jsxs(Container, {\n      children: [/*#__PURE__*/_jsx(Heading, {\n        children: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"signUpBtnText\",\n          defaultMessage: \"Sign Up\"\n        })\n      }), /*#__PURE__*/_jsx(SubHeading, {\n        children: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"signUpText\",\n          defaultMessage: \"Every fill is required in sign up\"\n        })\n      }), /*#__PURE__*/_jsx(Input, {\n        type: \"email\",\n        placeholder: intl.formatMessage({\n          id: 'emailAddressPlaceholder',\n          defaultMessage: 'Dirección de correo electrónico o Teléfono de contacto'\n        }),\n        onChange: function onChange(e) {\n          return setEmail(e.target.value);\n        },\n        required: true,\n        height: \"48px\",\n        backgroundColor: \"#F7F7F7\",\n        mb: \"10px\"\n      }), /*#__PURE__*/_jsx(Input, {\n        type: \"password\",\n        placeholder: intl.formatMessage({\n          id: 'passwordPlaceholder',\n          defaultMessage: 'Password (min 6 characters)'\n        }),\n        onChange: function onChange(e) {\n          return setPassword(e.target.value);\n        },\n        required: true,\n        height: \"48px\",\n        backgroundColor: \"#F7F7F7\",\n        mb: \"10px\"\n      }), /*#__PURE__*/_jsxs(HelperText, {\n        style: {\n          padding: '20px 0 30px'\n        },\n        children: [/*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"signUpText\",\n          defaultMessage: \"By signing up, you agree to Pickbazar's\"\n        }), \"\\xA0\", /*#__PURE__*/_jsx(Link, {\n          href: \"/\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsx(FormattedMessage, {\n              id: \"termsConditionText\",\n              defaultMessage: \"Terms & Condition\"\n            })\n          })\n        })]\n      }), /*#__PURE__*/_jsx(Button, {\n        variant: \"primary\",\n        size: \"big\",\n        width: \"100%\",\n        onClick: handleSubmit,\n        type: \"submit\",\n        children: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"continueBtn\",\n          defaultMessage: \"Continue\"\n        })\n      }), /*#__PURE__*/_jsx(Divider, {\n        children: /*#__PURE__*/_jsx(\"span\", {\n          children: /*#__PURE__*/_jsx(FormattedMessage, {\n            id: \"orText\",\n            defaultMessage: \"or\"\n          })\n        })\n      }), /*#__PURE__*/_jsxs(Button, {\n        variant: \"primary\",\n        size: \"big\",\n        style: {\n          width: '100%',\n          backgroundColor: '#4267b2',\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsx(IconWrapper, {\n          children: /*#__PURE__*/_jsx(Facebook, {})\n        }), /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"continueFacebookBtn\",\n          defaultMessage: \"Continue with Facebook\"\n        })]\n      }), /*#__PURE__*/_jsxs(Button, {\n        variant: \"primary\",\n        size: \"big\",\n        style: {\n          width: '100%',\n          backgroundColor: '#4285f4'\n        },\n        children: [/*#__PURE__*/_jsx(IconWrapper, {\n          children: /*#__PURE__*/_jsx(Google, {})\n        }), /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"continueGoogleBtn\",\n          defaultMessage: \"Continue with Google\"\n        })]\n      }), /*#__PURE__*/_jsxs(Offer, {\n        style: {\n          padding: '20px 0'\n        },\n        children: [/*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"alreadyHaveAccount\",\n          defaultMessage: \"Already have an account?\"\n        }), ' ', /*#__PURE__*/_jsx(LinkButton, {\n          onClick: toggleSignInForm,\n          children: /*#__PURE__*/_jsx(FormattedMessage, {\n            id: \"loginBtnText\",\n            defaultMessage: \"Login\"\n          })\n        })]\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/router';\nimport { Modal } from '@redq/reuse-modal';\nimport Carousel from 'components/carousel/carousel';\nimport { Banner } from 'components/banner/banner';\nimport { HorizontalCategoryCardMenu } from 'layouts/horizontal-category-menu/horizontal-category-card-menu';\nimport { MainContentArea, ContentSection, OfferSection, MobileCarouselDropdown } from 'assets/styles/pages.style'; // Static Data Import Here\n\nimport { siteOffers } from 'site-settings/site-offers';\nimport { sitePages } from 'site-settings/site-pages';\nimport { SEO } from 'components/seo';\nimport { useRefScroll } from 'utils/use-ref-scroll';\nimport { initializeApollo } from 'utils/apollo';\nimport { GET_PRODUCTS } from 'graphql/query/products.query';\nimport { GET_CATEGORIES } from 'graphql/query/category.query';\nimport { ModalProvider } from 'contexts/modal/modal.provider';\nimport { useQuery } from '@apollo/client';\nimport config from 'setting/config';\nimport { GET_INFO_SHOP } from 'utils/graphql/query/infoshop.query';\nconst Sidebar = dynamic(() => import('layouts/sidebar/sidebar'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('layouts/sidebar/sidebar')],\n    modules: [\"[type].tsx -> \" + 'layouts/sidebar/sidebar']\n  }\n});\nconst Products = dynamic(() => import('components/product-grid/product-list/product-list'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/product-grid/product-list/product-list')],\n    modules: [\"[type].tsx -> \" + 'components/product-grid/product-list/product-list']\n  }\n});\nconst CartPopUp = dynamic(() => import('features/carts/cart-popup'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('features/carts/cart-popup')],\n    modules: [\"[type].tsx -> \" + 'features/carts/cart-popup']\n  }\n});\n\nconst CategoryPage = ({\n  deviceType\n}) => {\n  const {\n    query\n  } = useRouter();\n  const {\n    elRef: targetRef,\n    scroll\n  } = useRefScroll({\n    percentOfElement: 0,\n    percentOfContainer: 0,\n    offsetPX: -110\n  });\n  const cid = config().SUBSCRIPTION_ID;\n  var {\n    data,\n    error,\n    refetch,\n    fetchMore\n  } = useQuery(GET_INFO_SHOP, {\n    variables: {\n      clientid: cid\n    }\n  });\n  React.useEffect(() => {\n    if (query.text || query.category) {\n      scroll();\n    }\n  }, [query.text, query.category]);\n  const PAGE_TYPE = query.type;\n  const page = sitePages[PAGE_TYPE];\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [data && window.sessionStorage.setItem('cid', cid), /*#__PURE__*/_jsx(SEO, {\n      title: data && data.info_shop_view[0].site_name,\n      description: data && data.info_shop_view[0].description + ' - Detalle'\n    }), /*#__PURE__*/_jsx(ModalProvider, {\n      children: /*#__PURE__*/_jsxs(Modal, {\n        children: [/*#__PURE__*/_jsx(Banner, {\n          intlTitleId: page === null || page === void 0 ? void 0 : page.banner_title_id,\n          intlDescriptionId: page === null || page === void 0 ? void 0 : page.banner_description_id,\n          imageUrl: page === null || page === void 0 ? void 0 : page.banner_image_url\n        }), /*#__PURE__*/_jsx(OfferSection, {\n          children: /*#__PURE__*/_jsx(\"div\", {\n            style: {\n              margin: '0 -10px'\n            },\n            children: /*#__PURE__*/_jsx(Carousel, {\n              deviceType: deviceType,\n              data: siteOffers\n            })\n          })\n        }), /*#__PURE__*/_jsx(MobileCarouselDropdown, {}), /*#__PURE__*/_jsx(MainContentArea, {\n          children: /*#__PURE__*/_jsx(ContentSection, {\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              ref: targetRef,\n              children: [/*#__PURE__*/_jsx(HorizontalCategoryCardMenu, {\n                type: PAGE_TYPE\n              }), /*#__PURE__*/_jsx(Products, {\n                type: PAGE_TYPE,\n                deviceType: deviceType,\n                fetchLimit: 20\n              })]\n            })\n          })\n        }), /*#__PURE__*/_jsx(CartPopUp, {\n          deviceType: deviceType\n        })]\n      })\n    })]\n  });\n};\n\nexport const getStaticProps = async ({\n  params\n}) => {\n  const apolloClient = initializeApollo();\n  await apolloClient.query({\n    query: GET_PRODUCTS,\n    variables: {\n      type: params.type,\n      offset: 0,\n      limit: 20\n    }\n  });\n  await apolloClient.query({\n    query: GET_CATEGORIES,\n    variables: {\n      type: params.type\n    }\n  });\n  return {\n    props: {\n      initialApolloState: apolloClient.cache.extract()\n    },\n    revalidate: 1\n  };\n};\nexport async function getStaticPaths() {\n  return {\n    paths: [{\n      params: {\n        type: 'grocery'\n      }\n    }, {\n      params: {\n        type: 'makeup'\n      }\n    }, {\n      params: {\n        type: 'bags'\n      }\n    }, {\n      params: {\n        type: 'book'\n      }\n    }, {\n      params: {\n        type: 'medicine'\n      }\n    }, {\n      params: {\n        type: 'furniture'\n      }\n    }, {\n      params: {\n        type: 'clothing'\n      }\n    }],\n    fallback: false\n  };\n}\nexport default CategoryPage;","map":null,"metadata":{},"sourceType":"module"}
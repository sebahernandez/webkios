{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sebastian/space/web/packages/shop-restaurant/src/pages/[type].tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/router';\nimport { Modal } from '@redq/reuse-modal';\nimport { Banner } from 'components/banner/banner';\nimport { HorizontalCategoryCardMenu } from 'layouts/horizontal-category-menu/horizontal-category-card-menu';\nimport { MainContentArea, ContentSection, MobileCarouselDropdown } from 'assets/styles/pages.style';\nimport { sitePages } from 'site-settings/site-pages';\nimport { SEO } from 'components/seo';\nimport { useRefScroll } from 'utils/use-ref-scroll';\nimport { ModalProvider } from 'contexts/modal/modal.provider';\nimport { useQuery } from '@apollo/client';\nimport { GET_INFO_SHOP } from 'utils/graphql/query/infoshop.query';\nimport Cookies from 'universal-cookie';\nimport { MobileBanner } from 'components/banner/mobile-banner';\nvar cookie = new Cookies();\nvar Sidebar = dynamic(_c = function _c() {\n  return import('layouts/sidebar/sidebar');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('layouts/sidebar/sidebar')];\n    },\n    modules: [\"[type].tsx -> \" + 'layouts/sidebar/sidebar']\n  }\n});\n_c2 = Sidebar;\nvar Products = dynamic(_c3 = function _c3() {\n  return import('components/product-grid/product-list/product-list');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('components/product-grid/product-list/product-list')];\n    },\n    modules: [\"[type].tsx -> \" + 'components/product-grid/product-list/product-list']\n  }\n});\n_c4 = Products;\nvar CartPopUp = dynamic(_c5 = function _c5() {\n  return import('features/carts/cart-popup');\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('features/carts/cart-popup')];\n    },\n    modules: [\"[type].tsx -> \" + 'features/carts/cart-popup']\n  }\n});\n_c6 = CartPopUp;\n\nvar CategoryPage = function CategoryPage(_ref) {\n  _s();\n\n  var deviceType = _ref.deviceType;\n\n  var _useState = useState(''),\n      cid = _useState[0],\n      setCid = _useState[1];\n\n  var _useRouter = useRouter(),\n      query = _useRouter.query;\n\n  var _useRefScroll = useRefScroll({\n    percentOfElement: 0,\n    percentOfContainer: 0,\n    offsetPX: -110\n  }),\n      targetRef = _useRefScroll.elRef,\n      scroll = _useRefScroll.scroll;\n\n  var _useQuery = useQuery(GET_INFO_SHOP, {\n    variables: {\n      clientid: cid\n    }\n  }),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      refetch = _useQuery.refetch,\n      fetchMore = _useQuery.fetchMore;\n\n  React.useEffect(function () {\n    setCid(cookie.get('clientid'));\n\n    if (query.text || query.category) {\n      scroll();\n    }\n  }, [cid, query.text, query.category]);\n  var PAGE_TYPE = query.type;\n  var page = sitePages[PAGE_TYPE];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SEO, {\n      title: data && data.suscripciones.length > 0 && data.suscripciones[0].titulo,\n      description: data && data.suscripciones.length > 0 && data.suscripciones[0].descripcion + ' - Detalle',\n      nombre: data && data.suscripciones.length > 0 && data.suscripciones[0].nombre,\n      tags: data && data.suscripciones.length > 0 && data.suscripciones[0].tags\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 8\n    }, _this), /*#__PURE__*/_jsxDEV(ModalProvider, {\n      children: /*#__PURE__*/_jsxDEV(Modal, {\n        children: [/*#__PURE__*/_jsxDEV(MobileBanner, {\n          intlTitleId: page === null || page === void 0 ? void 0 : page.banner_title_id,\n          type: PAGE_TYPE,\n          imageUrl: data && data.suscripciones.length > 0 && data.suscripciones[0].shop_image_body\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 10\n        }, _this), /*#__PURE__*/_jsxDEV(Banner, {\n          intlTitleId: page === null || page === void 0 ? void 0 : page.banner_title_id,\n          intlDescriptionId: page === null || page === void 0 ? void 0 : page.banner_description_id,\n          imageUrl: data && data.suscripciones.length > 0 && data.suscripciones[0].shop_image_body\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(MobileCarouselDropdown, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(MainContentArea, {\n          children: /*#__PURE__*/_jsxDEV(ContentSection, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: targetRef,\n              children: [/*#__PURE__*/_jsxDEV(HorizontalCategoryCardMenu, {\n                type: PAGE_TYPE\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 15\n              }, _this), /*#__PURE__*/_jsxDEV(Products, {\n                type: PAGE_TYPE,\n                deviceType: deviceType,\n                fetchLimit: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(CartPopUp, {\n          deviceType: deviceType\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(CategoryPage, \"4v8gH1OH94UYy1g682PK3krZTy8=\", false, function () {\n  return [useRouter, useRefScroll, useQuery];\n});\n\n_c7 = CategoryPage;\nexport var __N_SSG = true;\nexport default CategoryPage;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"Sidebar$dynamic\");\n$RefreshReg$(_c2, \"Sidebar\");\n$RefreshReg$(_c3, \"Products$dynamic\");\n$RefreshReg$(_c4, \"Products\");\n$RefreshReg$(_c5, \"CartPopUp$dynamic\");\n$RefreshReg$(_c6, \"CartPopUp\");\n$RefreshReg$(_c7, \"CategoryPage\");","map":{"version":3,"sources":["/Users/sebastian/space/web/packages/shop-restaurant/src/pages/[type].tsx"],"names":["React","useState","dynamic","useRouter","Modal","Banner","HorizontalCategoryCardMenu","MainContentArea","ContentSection","MobileCarouselDropdown","sitePages","SEO","useRefScroll","ModalProvider","useQuery","GET_INFO_SHOP","Cookies","MobileBanner","cookie","Sidebar","Products","CartPopUp","ssr","CategoryPage","deviceType","cid","setCid","query","percentOfElement","percentOfContainer","offsetPX","targetRef","elRef","scroll","variables","clientid","data","error","refetch","fetchMore","useEffect","get","text","category","PAGE_TYPE","type","page","suscripciones","length","titulo","descripcion","nombre","tags","banner_title_id","shop_image_body","banner_description_id"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { GetStaticProps } from 'next';\nimport dynamic from 'next/dynamic';\nimport { useRouter } from 'next/router';\nimport { Modal } from '@redq/reuse-modal';\nimport Carousel from 'components/carousel/carousel';\nimport { Banner } from 'components/banner/banner'; \nimport { HorizontalCategoryCardMenu } from 'layouts/horizontal-category-menu/horizontal-category-card-menu';\nimport {\n  MainContentArea, \n  ContentSection,\n  OfferSection,\n  MobileCarouselDropdown,\n} from 'assets/styles/pages.style'; \nimport { siteOffers } from 'site-settings/site-offers';\nimport { sitePages } from 'site-settings/site-pages';\nimport { SEO } from 'components/seo';\nimport { useRefScroll } from 'utils/use-ref-scroll';\nimport { initializeApollo } from 'utils/apollo';\nimport { GET_PRODUCTS } from 'graphql/query/products.query';\nimport { GET_CATEGORIES } from 'graphql/query/category.query';\nimport { ModalProvider } from 'contexts/modal/modal.provider';\nimport { useQuery } from '@apollo/client';\nimport { GET_INFO_SHOP } from 'utils/graphql/query/infoshop.query'; \nimport Cookies  from 'universal-cookie'; \nimport { MobileBanner } from 'components/banner/mobile-banner';\n\nconst cookie = new Cookies()\nconst Sidebar = dynamic(() => import('layouts/sidebar/sidebar'));\nconst Products = dynamic(() =>\n  import('components/product-grid/product-list/product-list')\n);\nconst CartPopUp = dynamic(() => import('features/carts/cart-popup'), {\n  ssr: false,\n});\n\nconst CategoryPage: React.FC<any> = ({ deviceType }) => {\n \n  const [cid, setCid] = useState('')\n  const { query } = useRouter();\n  const { elRef: targetRef, scroll } = useRefScroll({\n    percentOfElement: 0,\n    percentOfContainer: 0,\n    offsetPX: -110,\n  });\n\n  var { data, error, refetch, fetchMore } = useQuery(GET_INFO_SHOP,\n    {\n        variables: {\n          clientid: cid\n\n        }\n    }); \n  \n \n  React.useEffect(() => {\n\n    setCid(cookie.get('clientid'))\n\n    if (query.text || query.category) {\n      scroll();\n    }\n  }, [cid, query.text, query.category]);\n  const PAGE_TYPE: any = query.type;\n  const page = sitePages[PAGE_TYPE];\n\n\n   \n  return (\n    <>\n       <SEO title={data && data.suscripciones.length > 0 && data.suscripciones[0].titulo} \n            description={data && data.suscripciones.length > 0 && data.suscripciones[0].descripcion + ' - Detalle'}\n            nombre={data && data.suscripciones.length > 0 && data.suscripciones[0].nombre } \n            tags={data && data.suscripciones.length > 0 && data.suscripciones[0].tags } \n            />\n      <ModalProvider>\n        <Modal>\n         <MobileBanner intlTitleId={page?.banner_title_id} type={PAGE_TYPE} imageUrl={data && data.suscripciones.length > 0 && data.suscripciones[0].shop_image_body}   /> \n          <Banner\n            intlTitleId={page?.banner_title_id}\n            intlDescriptionId={page?.banner_description_id}\n            imageUrl={data && data.suscripciones.length > 0 && data.suscripciones[0].shop_image_body}  \n          />\n          {/* <OfferSection>\n            <div style={{ margin: '0 -10px' }}>\n              <Carousel deviceType={deviceType} data={siteOffers} />\n            </div>\n          </OfferSection> */}\n          <MobileCarouselDropdown>\n          {/*   <Sidebar type={PAGE_TYPE} deviceType={deviceType} /> */}\n          </MobileCarouselDropdown>\n          <MainContentArea>\n            <ContentSection>\n              <div ref={targetRef}>\n              <HorizontalCategoryCardMenu type={PAGE_TYPE} />       \n                <Products\n                  type={PAGE_TYPE}\n                  deviceType={deviceType}\n                  fetchLimit={20} \n                />\n              </div>\n            </ContentSection>\n          </MainContentArea>\n          <CartPopUp deviceType={deviceType} />\n        </Modal>\n      </ModalProvider>\n    </>\n  );\n};\nexport const getStaticProps: GetStaticProps = async ({ params }) => {\n  const apolloClient = initializeApollo();\n\n  await apolloClient.query({\n    query: GET_PRODUCTS,\n    variables: {\n      type: params.type,\n      offset: 0,\n      limit: 20,\n    },\n  });\n  await apolloClient.query({\n    query: GET_CATEGORIES,\n    variables: {\n      type: params.type,\n    },\n  });\n\n  return {\n    props: {\n      initialApolloState: apolloClient.cache.extract(),\n    },\n    revalidate: 1,\n  };\n};\n\nexport async function getStaticPaths() {\n  return {\n    paths: [\n      { params: { type: 'grocery' } },\n      { params: { type: 'makeup' } },\n      { params: { type: 'bags' } },\n      { params: { type: 'book' } },\n      { params: { type: 'medicine' } },\n      { params: { type: 'furniture' } },\n      { params: { type: 'clothing' } },\n    ],\n    fallback: false,\n  };\n}\nexport default CategoryPage;\n"]},"metadata":{},"sourceType":"module"}
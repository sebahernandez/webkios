{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/features/carts/cart.tsx\";\nimport React, { useContext, useState } from 'react';\nimport { openModal } from '@redq/reuse-modal';\nimport { CartPopupBody, PopupHeader, PopupItemCount, CloseButton, PromoCode, CheckoutButtonWrapper, CheckoutButton, Title, PriceBox, NoProductMsg, NoProductImg, ItemWrapper, CouponBoxWrapper, CouponCode } from './cart.style';\nimport { CloseIcon } from 'assets/icons/CloseIcon';\nimport { ShoppingBagLarge } from 'assets/icons/ShoppingBagLarge';\nimport { NoCartBag } from 'assets/icons/NoCartBag';\nimport { CURRENCY } from 'utils/constant';\nimport { FormattedMessage } from 'react-intl';\nimport { useLocale } from 'contexts/language/language.provider';\nimport { Scrollbar } from 'components/scrollbar/scrollbar';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { CartItem } from 'components/cart-item/cart-item';\nimport Coupon from 'features/coupon/coupon';\nimport { AuthContext } from 'contexts/auth/auth.context';\nimport AuthenticationForm from 'features/authentication-form';\nimport Cookies from 'universal-cookie';\nimport { useAppDispatch } from 'contexts/app/app.provider';\nimport { useRouter } from 'next/router';\nimport localForage from 'localforage';\n\nconst Cart = ({\n  style,\n  className,\n  onCloseBtnClick,\n  scrollbarHeight\n}) => {\n  const {\n    items,\n    coupon,\n    addItem,\n    removeItem,\n    removeItemFromCart,\n    cartItemsCount,\n    calculatePrice\n  } = useCart();\n  const router = useRouter();\n  const {\n    0: hasCoupon,\n    1: setCoupon\n  } = useState(false);\n  const {\n    isRtl\n  } = useLocale();\n  const cookie = new Cookies();\n  const dispatch = useAppDispatch();\n  const {\n    authState: {\n      isAuthenticated\n    },\n    authDispatch\n  } = useContext(AuthContext);\n  const carrito = localForage.getItem('@session');\n\n  const signInOutForm = () => {\n    if (isAuthenticated) {\n      console.log('JSON CARRITO CART:', carrito);\n      router.push('/checkout');\n    } else {\n      cookie.set('login', 2);\n      authDispatch({\n        type: 'SIGNIN'\n      });\n      openModal({\n        show: true,\n        overlayClassName: 'quick-view-overlay',\n        closeOnClickOutside: true,\n        component: AuthenticationForm,\n        closeComponent: '',\n        config: {\n          enableResizing: false,\n          disableDragging: true,\n          className: 'quick-view-modal',\n          width: 458,\n          height: 'auto'\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(CartPopupBody, {\n    className: className,\n    style: style,\n    children: [/*#__PURE__*/_jsxDEV(PopupHeader, {\n      children: [/*#__PURE__*/_jsxDEV(PopupItemCount, {\n        children: [/*#__PURE__*/_jsxDEV(ShoppingBagLarge, {\n          width: \"19px\",\n          height: \"24px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [cartItemsCount, \"\\xA0\", cartItemsCount > 1 ? /*#__PURE__*/_jsxDEV(FormattedMessage, {\n            id: \"cartItems\",\n            defaultMessage: \"items\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(FormattedMessage, {\n            id: \"cartItem\",\n            defaultMessage: \"item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CloseButton, {\n        onClick: onCloseBtnClick,\n        children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Scrollbar, {\n      className: \"cart-scrollbar\",\n      children: /*#__PURE__*/_jsxDEV(ItemWrapper, {\n        className: \"items-wrapper\",\n        children: !!cartItemsCount ? items.map(item => /*#__PURE__*/_jsxDEV(CartItem, {\n          onIncrement: () => addItem(item),\n          onDecrement: () => removeItem(item),\n          onRemove: () => removeItemFromCart(item),\n          data: item\n        }, `cartItem-${item.id}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 15\n        }, this)) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(NoProductImg, {\n            children: /*#__PURE__*/_jsxDEV(NoCartBag, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(NoProductMsg, {\n            children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n              id: \"noProductFound\",\n              defaultMessage: \"No existen productos encontrados\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CheckoutButtonWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(PromoCode, {\n        children: !(coupon !== null && coupon !== void 0 && coupon.discountInPercent) ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: !hasCoupon ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setCoupon(prev => !prev),\n            children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n              id: \"specialCode\",\n              defaultMessage: \"Have a special code?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(CouponBoxWrapper, {\n            children: /*#__PURE__*/_jsxDEV(Coupon, {\n              disabled: !items.length,\n              style: {\n                boxShadow: '0 3px 6px rgba(0, 0, 0, 0.06)'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 17\n          }, this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(CouponCode, {\n          children: [/*#__PURE__*/_jsxDEV(FormattedMessage, {\n            id: \"couponApplied\",\n            defaultMessage: \"Coupon Applied\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: coupon.code\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), cartItemsCount !== 0 ?\n      /*#__PURE__*/\n\n      /*  <Link href='/checkout'> */\n      _jsxDEV(CheckoutButton, {\n        onClick: signInOutForm,\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n              id: \"nav.checkout\",\n              defaultMessage: \"Checkout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(PriceBox, {\n            children: [CURRENCY, calculatePrice()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }, this)\n      /* </Link> */\n      :\n      /*#__PURE__*/\n      _jsxDEV(CheckoutButton, {\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Title, {\n            children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n              id: \"nav.checkout\",\n              defaultMessage: \"Checkout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(PriceBox, {\n            children: [CURRENCY, calculatePrice()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n};\n\nexport default Cart;","map":{"version":3,"sources":["/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/features/carts/cart.tsx"],"names":["React","useContext","useState","openModal","CartPopupBody","PopupHeader","PopupItemCount","CloseButton","PromoCode","CheckoutButtonWrapper","CheckoutButton","Title","PriceBox","NoProductMsg","NoProductImg","ItemWrapper","CouponBoxWrapper","CouponCode","CloseIcon","ShoppingBagLarge","NoCartBag","CURRENCY","FormattedMessage","useLocale","Scrollbar","useCart","CartItem","Coupon","AuthContext","AuthenticationForm","Cookies","useAppDispatch","useRouter","localForage","Cart","style","className","onCloseBtnClick","scrollbarHeight","items","coupon","addItem","removeItem","removeItemFromCart","cartItemsCount","calculatePrice","router","hasCoupon","setCoupon","isRtl","cookie","dispatch","authState","isAuthenticated","authDispatch","carrito","getItem","signInOutForm","console","log","push","set","type","show","overlayClassName","closeOnClickOutside","component","closeComponent","config","enableResizing","disableDragging","width","height","map","item","id","discountInPercent","prev","length","boxShadow","code"],"mappings":"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","sourcesContent":["import React,  { useContext, useState } from 'react';\nimport { openModal } from '@redq/reuse-modal';\nimport {\n  CartPopupBody,\n  PopupHeader,\n  PopupItemCount,\n  CloseButton,\n  PromoCode,\n  CheckoutButtonWrapper,\n  CheckoutButton,\n  Title,\n  PriceBox,\n  NoProductMsg,\n  NoProductImg,\n  ItemWrapper,\n  CouponBoxWrapper,\n  CouponCode,\n} from './cart.style';\nimport { CloseIcon } from 'assets/icons/CloseIcon';\nimport { ShoppingBagLarge } from 'assets/icons/ShoppingBagLarge';\nimport { NoCartBag } from 'assets/icons/NoCartBag';\nimport { CURRENCY } from 'utils/constant';\nimport { FormattedMessage } from 'react-intl';\nimport { useLocale } from 'contexts/language/language.provider';\n\nimport { Scrollbar } from 'components/scrollbar/scrollbar';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { CartItem } from 'components/cart-item/cart-item';\nimport Coupon from 'features/coupon/coupon';\nimport { AuthContext } from 'contexts/auth/auth.context';\nimport AuthenticationForm from 'features/authentication-form';\nimport Cookies  from 'universal-cookie';\nimport { useAppDispatch } from 'contexts/app/app.provider';\nimport { useRouter } from 'next/router';\nimport localForage from 'localforage';\n\n\ntype CartPropsType = {\n  style?: any;\n  className?: string;\n  scrollbarHeight?: string;\n  onCloseBtnClick?: (e: any) => void;\n};\n\nconst Cart: React.FC<CartPropsType> = ({\n  style,\n  className,\n  onCloseBtnClick,\n  scrollbarHeight,\n}) => {\n  const {\n    items,\n    coupon,\n    addItem,\n    removeItem,\n    removeItemFromCart,\n    cartItemsCount,\n    calculatePrice,\n  } = useCart();\n  const router = useRouter();\n  const [hasCoupon, setCoupon] = useState(false);\n  const { isRtl } = useLocale();\n  const cookie = new Cookies()\n  const dispatch = useAppDispatch();\n  const {\n    authState: { isAuthenticated },\n    authDispatch,\n  } = useContext<any>(AuthContext);\n\n  const carrito = localForage.getItem('@session');\n\n  \n  const signInOutForm = () => {\n   \n    if (isAuthenticated) {\n         console.log('JSON CARRITO CART:', carrito)\n\n        router.push('/checkout');\n    } else {\n          cookie.set('login',2)\n          authDispatch({\n            type: 'SIGNIN',\n          });\n          openModal({\n            show: true,\n            overlayClassName: 'quick-view-overlay',\n            closeOnClickOutside: true,\n            component: AuthenticationForm,\n            closeComponent: '',\n            config: {\n              enableResizing: false,\n              disableDragging: true,\n              className: 'quick-view-modal',\n              width: 458,\n              height: 'auto',\n            },\n          });\n          \n    }\n\n  };\n\n\n  return (\n    <CartPopupBody className={className} style={style}>\n      <PopupHeader>\n        <PopupItemCount>\n          <ShoppingBagLarge width='19px' height='24px' />\n          <span>\n            {cartItemsCount}\n            &nbsp;\n            {cartItemsCount > 1 ? (\n              <FormattedMessage id='cartItems' defaultMessage='items' />\n            ) : (\n              <FormattedMessage id='cartItem' defaultMessage='item' />\n            )}\n          </span>\n        </PopupItemCount>\n\n        <CloseButton onClick={onCloseBtnClick}>\n          <CloseIcon />\n        </CloseButton>\n      </PopupHeader>\n\n      <Scrollbar className='cart-scrollbar'>\n        <ItemWrapper className='items-wrapper'>\n          {!!cartItemsCount ? (\n            items.map((item) => (\n              <CartItem\n                key={`cartItem-${item.id}`}\n                onIncrement={() => addItem(item)}\n                onDecrement={() => removeItem(item)}\n                onRemove={() => removeItemFromCart(item)}\n                data={item}\n              />\n            ))\n          ) : (\n            <>\n              <NoProductImg>\n                <NoCartBag />\n              </NoProductImg>\n              <NoProductMsg>\n                <FormattedMessage\n                  id='noProductFound'\n                  defaultMessage='No existen productos encontrados'\n                />\n              </NoProductMsg>\n            </>\n          )}\n        </ItemWrapper>\n      </Scrollbar>\n\n      <CheckoutButtonWrapper>\n        <PromoCode>\n          {!coupon?.discountInPercent ? (\n            <>\n              {!hasCoupon ? (\n                <button onClick={() => setCoupon((prev) => !prev)}>\n                  <FormattedMessage\n                    id='specialCode'\n                    defaultMessage='Have a special code?'\n                  />\n                </button>\n              ) : (\n                <CouponBoxWrapper>\n                  <Coupon\n                    disabled={!items.length}\n                    style={{\n                      boxShadow: '0 3px 6px rgba(0, 0, 0, 0.06)',\n                    }}\n                  />\n                </CouponBoxWrapper>\n              )}\n            </>\n          ) : (\n            <CouponCode>\n              <FormattedMessage\n                id='couponApplied'\n                defaultMessage='Coupon Applied'\n              />\n              <span>{coupon.code}</span>\n            </CouponCode>\n          )}\n        </PromoCode>\n\n        {cartItemsCount !== 0 ? (\n         /*  <Link href='/checkout'> */\n            <CheckoutButton onClick={signInOutForm}>\n              <>\n                <Title>\n                  <FormattedMessage\n                    id='nav.checkout'\n                    defaultMessage='Checkout'\n                  />\n                </Title>\n                <PriceBox>\n                  {CURRENCY}\n                  {calculatePrice()}\n                </PriceBox>\n              </>\n            </CheckoutButton>\n          /* </Link> */\n        ) : (\n          <CheckoutButton>\n            <>\n              <Title>\n                <FormattedMessage id='nav.checkout' defaultMessage='Checkout' />\n              </Title>\n              <PriceBox>\n                {CURRENCY}\n                {calculatePrice()}\n              </PriceBox>\n            </>\n          </CheckoutButton>\n        )}\n      </CheckoutButtonWrapper>\n    </CartPopupBody>\n  );\n};\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/features/checkouts/checkout-two/checkout-two.tsx\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport { Button } from 'components/button/button';\nimport { CURRENCY } from 'utils/constant';\nimport { Scrollbar } from 'components/scrollbar/scrollbar';\nimport CheckoutWrapper, { CheckoutContainer, CheckoutInformation, InformationBox, CheckoutSubmit, HaveCoupon, CouponBoxWrapper, CouponInputBox, CouponCode, RemoveCoupon, TermConditionText, TermConditionLink, CartWrapper, CalculationWrapper, OrderInfo, Title, ItemsWrapper, Items, Quantity, Multiplier, ItemInfo, Price, TextWrapper, Text, Bold, Small, NoProductMsg, NoProductImg } from './checkout-two.style';\nimport { NoCartBag } from 'assets/icons/NoCartBag';\nimport Sticky from 'react-stickynode';\nimport { ProfileContext } from 'contexts/profile/profile.context';\nimport { FormattedMessage } from 'react-intl';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { useLocale } from 'contexts/language/language.provider';\nimport { useWindowSize } from 'utils/useWindowSize';\nimport Coupon from 'features/coupon/coupon';\nimport Address from 'features/address/address';\nimport Contact from 'features/contact/contact';\nimport { ADD_ORDER } from 'utils/graphql/mutation/order';\nimport { GET_ORDERS_OPEN } from 'utils/graphql/query/orders.query';\nimport { SET_CLIENTE } from 'utils/graphql/mutation/register_client';\nimport { useQuery, useMutation } from '@apollo/client';\nimport Cookies from 'universal-cookie';\nimport Payment from 'features/payment/payment'; // The type of props Checkout Form receives\n\nconst OrderItem = ({\n  product\n}) => {\n  const {\n    id,\n    quantity,\n    title,\n    nombre,\n    unit,\n    precio,\n    precio_venta\n  } = product;\n  const displayPrice = precio_venta ? precio_venta : precio;\n  return /*#__PURE__*/_jsxDEV(Items, {\n    children: [/*#__PURE__*/_jsxDEV(Quantity, {\n      children: quantity\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Multiplier, {\n      children: \"x\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ItemInfo, {\n      children: [nombre ? nombre : title, \" \", unit ? `| ${unit}` : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Price, {\n      children: [CURRENCY, (displayPrice * quantity).toFixed(0)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\nconst CheckoutWithSidebar = ({\n  clienteData,\n  token,\n  deviceType\n}) => {\n  const cookie = new Cookies();\n  const cid = cookie.get('cid');\n  const {\n    0: hasCoupon,\n    1: setHasCoupon\n  } = useState(false);\n  const {\n    state\n  } = useContext(ProfileContext);\n  const {\n    isRtl\n  } = useLocale();\n  const [addOrder, {\n    error\n  }] = useMutation(ADD_ORDER);\n  const [setCliente] = useMutation(SET_CLIENTE);\n  const {\n    items,\n    removeCoupon,\n    coupon,\n    clearCart,\n    cartItemsCount,\n    calculatePrice,\n    calculateDiscount,\n    calculateSubTotalPrice,\n    isRestaurant,\n    toggleRestaurant\n  } = useCart();\n  let {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: clienteid\n  } = useState(0);\n  let {\n    card,\n    schedules\n  } = state;\n  const {\n    0: address,\n    1: setAddress\n  } = useState(clienteData.addresses);\n  const {\n    0: contact,\n    1: setContact\n  } = useState(clienteData.contacts);\n  const size = useWindowSize();\n  const {\n    data\n  } = useQuery(GET_ORDERS_OPEN, {\n    variables: {\n      clientid: config().SUBSCRIPTION_ID,\n      cliente: clienteData.id\n    },\n    notifyOnNetworkStatusChange: true\n  });\n\n  const handleSubmit = async () => {\n    if (cartItemsCount > 0 && clienteData.addresses && clienteData.addresses.length > 0 && clienteData.contacts && clienteData.contacts.length > 0) {\n      setLoading(true); // Set Client\n\n      await setCliente({\n        variables: {\n          clientid: cid,\n          id: cookie.get('customer').id,\n          imageURL: cookie.get('user_logged').image\n        }\n      });\n      await processOrder();\n    }\n  };\n\n  const processOrder = async () => {\n    var today = new Date(),\n        date = today.getDate() + \"/\" + (today.getMonth() + 1) + \"/\" + today.getFullYear() + \"  \" + today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n    today.setMinutes(today.getMinutes() + 30);\n    var datedelivery = today.getDate() + \"/\" + (today.getMonth() + 1) + \"/\" + today.getFullYear() + \"  \" + today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n    sessionStorage.setItem('items', JSON.stringify(items));\n    sessionStorage.setItem('address', clienteData && clienteData.addresses.length > 0 ? clienteData.addresses[0].info : '[]');\n    sessionStorage.setItem('contact', clienteData && clienteData.contacts.length > 0 ? clienteData.contacts[0].number : '[]');\n    sessionStorage.setItem('itemscount', cartItemsCount);\n    sessionStorage.setItem('date', date.toString());\n    sessionStorage.setItem('datedelivery', datedelivery.toString());\n    sessionStorage.setItem('total', calculatePrice());\n    sessionStorage.setItem('discount', calculateDiscount());\n    sessionStorage.setItem('subtotal', calculateSubTotalPrice());\n    await add_order(); // backend\n\n    clearCart();\n    Router.push('/order-received');\n    setLoading(false);\n  };\n\n  const add_order = async () => {\n    sessionStorage.setItem('order', Date.now().toString());\n    await addOrder({\n      variables: {\n        clientid: config().SUBSCRIPTION_ID,\n        cliente: cookie.get('customer').id,\n        total: calculatePrice(),\n        subtotal: calculateSubTotalPrice(),\n        metodo_pago: 'card',\n        order: sessionStorage.getItem('order'),\n        items: JSON.stringify(items),\n        itemcount: cartItemsCount,\n        discount: calculateDiscount(),\n        delivery_date: sessionStorage.getItem('datedelivery'),\n        order_date: sessionStorage.getItem('date'),\n        delivery_address: clienteData.addresses[0].info,\n        contacto: sessionStorage.getItem('contact'),\n        status: 'Procesando',\n        received: true,\n        estado: 'Normal'\n      }\n    });\n    console.log('ingreando add_order termino satisfactoriamente');\n  };\n\n  const existeOrden = async () => {\n    if (data) {\n      if (data.pedido && data.pedido.length > 0) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    return false;\n  };\n\n  useEffect(() => {\n    return () => {\n      if (isRestaurant) {\n        toggleRestaurant();\n        clearCart();\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CheckoutWrapper, {\n      children: /*#__PURE__*/_jsxDEV(CheckoutContainer, {\n        children: [/*#__PURE__*/_jsxDEV(CheckoutInformation, {\n          children: [/*#__PURE__*/_jsxDEV(InformationBox, {\n            children: /*#__PURE__*/_jsxDEV(Address, {\n              address: clienteData.addresses,\n              increment: true,\n              flexStart: true,\n              buttonProps: {\n                variant: 'text',\n                type: 'button',\n                className: 'addButton'\n              },\n              icon: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(InformationBox, {\n            children: /*#__PURE__*/_jsxDEV(Contact, {\n              contacts: clienteData.contacts,\n              increment: true,\n              flexStart: true,\n              buttonProps: {\n                variant: 'text',\n                type: 'button',\n                className: 'addButton'\n              },\n              icon: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(InformationBox, {\n            className: \"paymentBox\",\n            style: {\n              paddingBottom: 30\n            },\n            children: [/*#__PURE__*/_jsxDEV(Payment, {\n              increment: true,\n              deviceType: deviceType\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 15\n            }, this), coupon ? /*#__PURE__*/_jsxDEV(CouponBoxWrapper, {\n              children: /*#__PURE__*/_jsxDEV(CouponCode, {\n                children: [/*#__PURE__*/_jsxDEV(FormattedMessage, {\n                  id: \"couponApplied\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: coupon.code\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(RemoveCoupon, {\n                  onClick: e => {\n                    e.preventDefault();\n                    removeCoupon();\n                    setHasCoupon(false);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n                    id: \"removeCoupon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(CouponBoxWrapper, {\n              children: !hasCoupon ? /*#__PURE__*/_jsxDEV(HaveCoupon, {\n                onClick: () => setHasCoupon(prev => !prev),\n                children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n                  id: \"specialCode\",\n                  defaultMessage: \"Tienes un c\\xF3digo especial?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(CouponInputBox, {\n                children: /*#__PURE__*/_jsxDEV(Coupon, {\n                  errorMsgFixed: true,\n                  className: \"normalCoupon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TermConditionText, {\n              children: [/*#__PURE__*/_jsxDEV(FormattedMessage, {\n                id: \"termAndConditionHelper\",\n                defaultMessage: \"By making this purchase you agree to our\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                href: \"/terms\",\n                children: /*#__PURE__*/_jsxDEV(TermConditionLink, {\n                  children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n                    id: \"termAndCondition\",\n                    defaultMessage: \"T\\xE9rminos y Condiciones.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CheckoutSubmit, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"button\",\n                onClick: handleSubmit\n                /*  disabled={!isValid} */\n                ,\n                size: \"big\",\n                loading: loading,\n                style: {\n                  width: '100%'\n                },\n                children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n                  id: \"processCheckout\",\n                  defaultMessage: \"Procesar Checkout\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CartWrapper, {\n          children: /*#__PURE__*/_jsxDEV(Sticky, {\n            enabled: size.width >= 768 ? true : false,\n            top: 120,\n            innerZ: 999,\n            children: /*#__PURE__*/_jsxDEV(OrderInfo, {\n              children: [/*#__PURE__*/_jsxDEV(Title, {\n                children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n                  id: \"cartTitle\",\n                  defaultMessage: \"Mi Pedido\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Scrollbar, {\n                className: \"checkout-scrollbar\",\n                children: /*#__PURE__*/_jsxDEV(ItemsWrapper, {\n                  children: cartItemsCount > 0 ? items.map(item => /*#__PURE__*/_jsxDEV(OrderItem, {\n                    product: item\n                  }, `cartItem-${item.id}`, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 386,\n                    columnNumber: 25\n                  }, this)) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(NoProductImg, {\n                      children: /*#__PURE__*/_jsxDEV(NoCartBag, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 391,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 390,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(NoProductMsg, {\n                      children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n                        id: \"noProductFound\",\n                        defaultMessage: \"No hay productos encontrados\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 395,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 394,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 383,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(CalculationWrapper, {\n                children: [/*#__PURE__*/_jsxDEV(TextWrapper, {\n                  children: [/*#__PURE__*/_jsxDEV(Text, {\n                    children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n                      id: \"subTotal\",\n                      defaultMessage: \"Sub Total\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 408,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 407,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Text, {\n                    children: [CURRENCY, calculateSubTotalPrice()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 413,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TextWrapper, {\n                  children: [/*#__PURE__*/_jsxDEV(Text, {\n                    children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n                      id: \"intlOrderDetailsDelivery\",\n                      defaultMessage: \"Delivery Fee\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 421,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 420,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Text, {\n                    children: [CURRENCY, \"0\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 426,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TextWrapper, {\n                  children: [/*#__PURE__*/_jsxDEV(Text, {\n                    children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n                      id: \"discountText\",\n                      defaultMessage: \"Descuento\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 431,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Text, {\n                    children: [CURRENCY, calculateDiscount()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 436,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TextWrapper, {\n                  style: {\n                    marginTop: 20\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Bold, {\n                    children: [/*#__PURE__*/_jsxDEV(FormattedMessage, {\n                      id: \"totalText\",\n                      defaultMessage: \"Total\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 444,\n                      columnNumber: 23\n                    }, this), ' ', /*#__PURE__*/_jsxDEV(Small, {\n                      children: [\"(\", /*#__PURE__*/_jsxDEV(FormattedMessage, {\n                        id: \"vatText\",\n                        defaultMessage: \"Incl. VAT\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 447,\n                        columnNumber: 25\n                      }, this), \")\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 445,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 443,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Bold, {\n                    children: [CURRENCY, calculatePrice()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 454,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 18\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 246,\n    columnNumber: 5\n  }, this);\n};\n\nexport default CheckoutWithSidebar;","map":{"version":3,"sources":["/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/features/checkouts/checkout-two/checkout-two.tsx"],"names":["React","useContext","useState","useEffect","Router","Link","Button","CURRENCY","Scrollbar","CheckoutWrapper","CheckoutContainer","CheckoutInformation","InformationBox","CheckoutSubmit","HaveCoupon","CouponBoxWrapper","CouponInputBox","CouponCode","RemoveCoupon","TermConditionText","TermConditionLink","CartWrapper","CalculationWrapper","OrderInfo","Title","ItemsWrapper","Items","Quantity","Multiplier","ItemInfo","Price","TextWrapper","Text","Bold","Small","NoProductMsg","NoProductImg","NoCartBag","Sticky","ProfileContext","FormattedMessage","useCart","useLocale","useWindowSize","Coupon","Address","Contact","ADD_ORDER","GET_ORDERS_OPEN","SET_CLIENTE","useQuery","useMutation","Cookies","Payment","OrderItem","product","id","quantity","title","nombre","unit","precio","precio_venta","displayPrice","toFixed","CheckoutWithSidebar","clienteData","token","deviceType","cookie","cid","get","hasCoupon","setHasCoupon","state","isRtl","addOrder","error","setCliente","items","removeCoupon","coupon","clearCart","cartItemsCount","calculatePrice","calculateDiscount","calculateSubTotalPrice","isRestaurant","toggleRestaurant","loading","setLoading","clienteid","card","schedules","address","setAddress","addresses","contact","setContact","contacts","size","data","variables","clientid","config","SUBSCRIPTION_ID","cliente","notifyOnNetworkStatusChange","handleSubmit","length","imageURL","image","processOrder","today","Date","date","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","setMinutes","datedelivery","sessionStorage","setItem","JSON","stringify","info","number","toString","add_order","push","now","total","subtotal","metodo_pago","order","getItem","itemcount","discount","delivery_date","order_date","delivery_address","contacto","status","received","estado","console","log","existeOrden","pedido","variant","type","className","paddingBottom","code","e","preventDefault","prev","width","map","item","marginTop"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,MAAT,QAAuB,0BAAvB;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,SAAT,QAA0B,gCAA1B;AACA,OAAOC,eAAP,IACEC,iBADF,EAEEC,mBAFF,EAGEC,cAHF,EAKEC,cALF,EAMEC,UANF,EAOEC,gBAPF,EAQEC,cARF,EASEC,UATF,EAUEC,YAVF,EAWEC,iBAXF,EAYEC,iBAZF,EAaEC,WAbF,EAcEC,kBAdF,EAeEC,SAfF,EAgBEC,KAhBF,EAiBEC,YAjBF,EAkBEC,KAlBF,EAmBEC,QAnBF,EAoBEC,UApBF,EAqBEC,QArBF,EAsBEC,KAtBF,EAuBEC,WAvBF,EAwBEC,IAxBF,EAyBEC,IAzBF,EA0BEC,KA1BF,EA2BEC,YA3BF,EA4BEC,YA5BF,QA6BO,sBA7BP;AA+BA,SAASC,SAAT,QAA0B,wBAA1B;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,SAASC,cAAT,QAA+B,kCAA/B;AACA,SAASC,gBAAT,QAAiC,YAAjC;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA,SAASC,SAAT,QAA0B,qCAA1B;AACA,SAASC,aAAT,QAA8B,qBAA9B;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,SAASC,SAAT,QAA0B,8BAA1B;AACA,SAASC,eAAT,QAAgC,kCAAhC;AACA,SAASC,WAAT,QAA4B,wCAA5B;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAA2C,gBAA3C;AACA,OAAOC,OAAP,MAAqB,kBAArB;AACA,OAAOC,OAAP,MAAoB,0BAApB,C,CAEA;;AAYA,MAAMC,SAAkC,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAE1D,QAAM;AAAEC,IAAAA,EAAF;AAAMC,IAAAA,QAAN;AAAgBC,IAAAA,KAAhB;AAAuBC,IAAAA,MAAvB;AAA+BC,IAAAA,IAA/B;AAAqCC,IAAAA,MAArC;AAA6CC,IAAAA;AAA7C,MAA8DP,OAApE;AACA,QAAMQ,YAAY,GAAGD,YAAY,GAAGA,YAAH,GAAkBD,MAAnD;AAIA,sBACE,QAAC,KAAD;AAAA,4BACE,QAAC,QAAD;AAAA,gBAAWJ;AAAX;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE,QAAC,QAAD;AAAA,iBACGE,MAAM,GAAGA,MAAH,GAAYD,KADrB,OAC6BE,IAAI,GAAI,KAAIA,IAAK,EAAb,GAAiB,EADlD;AAAA;AAAA;AAAA;AAAA;AAAA,YAHF,eAME,QAAC,KAAD;AAAA,iBACGrD,QADH,EAEG,CAACwD,YAAY,GAAGN,QAAhB,EAA0BO,OAA1B,CAAkC,CAAlC,CAFH;AAAA;AAAA;AAAA;AAAA;AAAA,YANF;AAAA,KAAYR,EAAZ;AAAA;AAAA;AAAA;AAAA,UADF;AAaD,CApBD;;AA4BA,MAAMS,mBAA0C,GAAG,CAAC;AAAEC,EAAAA,WAAF;AAAeC,EAAAA,KAAf;AAAsBC,EAAAA;AAAtB,CAAD,KAAwC;AACzF,QAAMC,MAAM,GAAG,IAAIjB,OAAJ,EAAf;AACA,QAAMkB,GAAG,GAAGD,MAAM,CAACE,GAAP,CAAW,KAAX,CAAZ;AACA,QAAM;AAAA,OAACC,SAAD;AAAA,OAAYC;AAAZ,MAA4BvE,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAAEwE,IAAAA;AAAF,MAAYzE,UAAU,CAACsC,cAAD,CAA5B;AACA,QAAM;AAAEoC,IAAAA;AAAF,MAAYjC,SAAS,EAA3B;AACA,QAAM,CAACkC,QAAD,EAAW;AAACC,IAAAA;AAAD,GAAX,IAAsB1B,WAAW,CAACJ,SAAD,CAAvC;AACA,QAAM,CAAC+B,UAAD,IAAe3B,WAAW,CAACF,WAAD,CAAhC;AACA,QAAM;AACJ8B,IAAAA,KADI;AAEJC,IAAAA,YAFI;AAGJC,IAAAA,MAHI;AAIJC,IAAAA,SAJI;AAKJC,IAAAA,cALI;AAMJC,IAAAA,cANI;AAOJC,IAAAA,iBAPI;AAQJC,IAAAA,sBARI;AASJC,IAAAA,YATI;AAUJC,IAAAA;AAVI,MAWF/C,OAAO,EAXX;AAYA,MAAI;AAAA,OAACgD,OAAD;AAAA,OAAUC;AAAV,MAAwBxF,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM;AAAA,OAACyF;AAAD,MAAczF,QAAQ,CAAC,CAAD,CAA5B;AACA,MAAI;AAAE0F,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAsBnB,KAA1B;AACA,QAAM;AAAA,OAACoB,OAAD;AAAA,OAAUC;AAAV,MAAwB7F,QAAQ,CAACgE,WAAW,CAAC8B,SAAb,CAAtC;AACA,QAAM;AAAA,OAACC,OAAD;AAAA,OAAUC;AAAV,MAAwBhG,QAAQ,CAACgE,WAAW,CAACiC,QAAb,CAAtC;AACA,QAAMC,IAAI,GAAGzD,aAAa,EAA1B;AACA,QAAM;AAAE0D,IAAAA;AAAF,MAAWnD,QAAQ,CACvBF,eADuB,EAEvB;AACEsD,IAAAA,SAAS,EAAE;AACTC,MAAAA,QAAQ,EAAEC,MAAM,GAAGC,eADV;AAETC,MAAAA,OAAO,EAAExC,WAAW,CAACV;AAFZ,KADb;AAKEmD,IAAAA,2BAA2B,EAAE;AAL/B,GAFuB,CAAzB;;AAaA,QAAMC,YAAY,GAAG,YAAY;AAE/B,QACKzB,cAAc,GAAG,CAAjB,IACAjB,WAAW,CAAC8B,SADZ,IACyB9B,WAAW,CAAC8B,SAAZ,CAAsBa,MAAtB,GAA+B,CADxD,IAEA3C,WAAW,CAACiC,QAFZ,IAEwBjC,WAAW,CAACiC,QAAZ,CAAqBU,MAArB,GAA8B,CAH3D,EAIK;AACAnB,MAAAA,UAAU,CAAC,IAAD,CAAV,CADA,CAGA;;AACA,YAAMZ,UAAU,CAAC;AAChBwB,QAAAA,SAAS,EAAE;AACDC,UAAAA,QAAQ,EAAEjC,GADT;AAEDd,UAAAA,EAAE,EAAEa,MAAM,CAACE,GAAP,CAAW,UAAX,EAAuBf,EAF1B;AAGDsD,UAAAA,QAAQ,EAAEzC,MAAM,CAACE,GAAP,CAAW,aAAX,EAA0BwC;AAHnC;AADK,OAAD,CAAhB;AAQF,YAAMC,YAAY,EAAlB;AAEC;AACP,GArBC;;AAuBF,QAAMA,YAAY,GAAG,YAAY;AAC7B,QAAIC,KAAK,GAAG,IAAIC,IAAJ,EAAZ;AAAA,QACAC,IAAI,GAAGF,KAAK,CAACG,OAAN,KAAkB,GAAlB,IACNH,KAAK,CAACI,QAAN,KAAmB,CADb,IACkB,GADlB,GAEPJ,KAAK,CAACK,WAAN,EAFO,GAEe,IAFf,GAGPL,KAAK,CAACM,QAAN,EAHO,GAGY,GAHZ,GAIPN,KAAK,CAACO,UAAN,EAJO,GAIc,GAJd,GAKPP,KAAK,CAACQ,UAAN,EANA;AAQAR,IAAAA,KAAK,CAACS,UAAN,CAAiBT,KAAK,CAACO,UAAN,KAAqB,EAAtC;AAGA,QAAIG,YAAY,GAAGV,KAAK,CAACG,OAAN,KAAkB,GAAlB,IAClBH,KAAK,CAACI,QAAN,KAAmB,CADD,IACM,GADN,GAEnBJ,KAAK,CAACK,WAAN,EAFmB,GAEG,IAFH,GAGnBL,KAAK,CAACM,QAAN,EAHmB,GAGA,GAHA,GAInBN,KAAK,CAACO,UAAN,EAJmB,GAIE,GAJF,GAKnBP,KAAK,CAACQ,UAAN,EALA;AAMEG,IAAAA,cAAc,CAACC,OAAf,CAAuB,OAAvB,EAA+BC,IAAI,CAACC,SAAL,CAAehD,KAAf,CAA/B;AACA6C,IAAAA,cAAc,CAACC,OAAf,CAAuB,SAAvB,EAAiC3D,WAAW,IAAIA,WAAW,CAAC8B,SAAZ,CAAsBa,MAAtB,GAA+B,CAA9C,GAAkD3C,WAAW,CAAC8B,SAAZ,CAAsB,CAAtB,EAAyBgC,IAA3E,GAAiF,IAAlH;AACAJ,IAAAA,cAAc,CAACC,OAAf,CAAuB,SAAvB,EAAiC3D,WAAW,IAAIA,WAAW,CAACiC,QAAZ,CAAqBU,MAArB,GAA8B,CAA7C,GAAiD3C,WAAW,CAACiC,QAAZ,CAAqB,CAArB,EAAwB8B,MAAzE,GAAiF,IAAlH;AACAL,IAAAA,cAAc,CAACC,OAAf,CAAuB,YAAvB,EAAoC1C,cAApC;AACAyC,IAAAA,cAAc,CAACC,OAAf,CAAuB,MAAvB,EAA8BV,IAAI,CAACe,QAAL,EAA9B;AACAN,IAAAA,cAAc,CAACC,OAAf,CAAuB,cAAvB,EAAsCF,YAAY,CAACO,QAAb,EAAtC;AACAN,IAAAA,cAAc,CAACC,OAAf,CAAuB,OAAvB,EAA+BzC,cAAc,EAA7C;AACAwC,IAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAkCxC,iBAAiB,EAAnD;AACAuC,IAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAkCvC,sBAAsB,EAAxD;AACA,UAAM6C,SAAS,EAAf,CA3B2B,CA2BT;;AAClBjD,IAAAA,SAAS;AACT9E,IAAAA,MAAM,CAACgI,IAAP,CAAY,iBAAZ;AAEF1C,IAAAA,UAAU,CAAC,KAAD,CAAV;AACD,GAhCH;;AAkCE,QAAMyC,SAAS,GAAG,YAAY;AAE5BP,IAAAA,cAAc,CAACC,OAAf,CAAuB,OAAvB,EAA+BX,IAAI,CAACmB,GAAL,GAAWH,QAAX,EAA/B;AACA,UAAMtD,QAAQ,CAAC;AACb0B,MAAAA,SAAS,EAAE;AACDC,QAAAA,QAAQ,EAAEC,MAAM,GAAGC,eADlB;AAEDC,QAAAA,OAAO,EAAErC,MAAM,CAACE,GAAP,CAAW,UAAX,EAAuBf,EAF/B;AAGD8E,QAAAA,KAAK,EAAElD,cAAc,EAHpB;AAIDmD,QAAAA,QAAQ,EAAEjD,sBAAsB,EAJ/B;AAKDkD,QAAAA,WAAW,EAAE,MALZ;AAMDC,QAAAA,KAAK,EAAEb,cAAc,CAACc,OAAf,CAAuB,OAAvB,CANN;AAOD3D,QAAAA,KAAK,EAAE+C,IAAI,CAACC,SAAL,CAAehD,KAAf,CAPN;AAQD4D,QAAAA,SAAS,EAAExD,cARV;AASDyD,QAAAA,QAAQ,EAAEvD,iBAAiB,EAT1B;AAUDwD,QAAAA,aAAa,EAAEjB,cAAc,CAACc,OAAf,CAAuB,cAAvB,CAVd;AAWDI,QAAAA,UAAU,EAAElB,cAAc,CAACc,OAAf,CAAuB,MAAvB,CAXX;AAYDK,QAAAA,gBAAgB,EAAE7E,WAAW,CAAC8B,SAAZ,CAAsB,CAAtB,EAAyBgC,IAZ1C;AAaDgB,QAAAA,QAAQ,EAAEpB,cAAc,CAACc,OAAf,CAAuB,SAAvB,CAbT;AAcDO,QAAAA,MAAM,EAAE,YAdP;AAeDC,QAAAA,QAAQ,EAAE,IAfT;AAgBDC,QAAAA,MAAM,EAAE;AAhBP;AADE,KAAD,CAAd;AAoBAC,IAAAA,OAAO,CAACC,GAAR,CAAY,gDAAZ;AAED,GAzBD;;AA2BA,QAAMC,WAAW,GAAG,YAAY;AAG9B,QAAGjD,IAAH,EAAS;AACP,UAAIA,IAAI,CAACkD,MAAL,IAAelD,IAAI,CAACkD,MAAL,CAAY1C,MAAZ,GAAqB,CAAxC,EAA2C;AACzC,eAAO,IAAP;AACD,OAFD,MAEO;AACL,eAAO,KAAP;AACD;AACF;;AACD,WAAO,KAAP;AAED,GAZD;;AAgBA1G,EAAAA,SAAS,CAAC,MAAM;AACd,WAAO,MAAM;AACX,UAAIoF,YAAJ,EAAkB;AAChBC,QAAAA,gBAAgB;AAChBN,QAAAA,SAAS;AACV;AAEF,KAND;AAOD,GARQ,EAQN,EARM,CAAT;AAUA,sBAEE;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE;AAAA;AAAA;AAAA;AAAA,YAHF,eAIE,QAAC,eAAD;AAAA,6BACE,QAAC,iBAAD;AAAA,gCACE,QAAC,mBAAD;AAAA,kCAEE,QAAC,cAAD;AAAA,mCACE,QAAC,OAAD;AACE,cAAA,OAAO,EAAEhB,WAAW,CAAC8B,SADvB;AAEE,cAAA,SAAS,EAAE,IAFb;AAGE,cAAA,SAAS,EAAE,IAHb;AAIE,cAAA,WAAW,EAAE;AACXwD,gBAAAA,OAAO,EAAE,MADE;AAEXC,gBAAAA,IAAI,EAAE,QAFK;AAGXC,gBAAAA,SAAS,EAAE;AAHA,eAJf;AASE,cAAA,IAAI,EAAE;AATR;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAFF,eAwBE,QAAC,cAAD;AAAA,mCACE,QAAC,OAAD;AACE,cAAA,QAAQ,EAAExF,WAAW,CAACiC,QADxB;AAEE,cAAA,SAAS,EAAE,IAFb;AAGE,cAAA,SAAS,EAAE,IAHb;AAIE,cAAA,WAAW,EAAE;AACXqD,gBAAAA,OAAO,EAAE,MADE;AAEXC,gBAAAA,IAAI,EAAE,QAFK;AAGXC,gBAAAA,SAAS,EAAE;AAHA,eAJf;AASE,cAAA,IAAI,EAAE;AATR;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAxBF,eAuCE,QAAC,cAAD;AACE,YAAA,SAAS,EAAC,YADZ;AAEE,YAAA,KAAK,EAAE;AAAEC,cAAAA,aAAa,EAAE;AAAjB,aAFT;AAAA,oCAKE,QAAC,OAAD;AAAS,cAAA,SAAS,EAAE,IAApB;AAA0B,cAAA,UAAU,EAAEvF;AAAtC;AAAA;AAAA;AAAA;AAAA,oBALF,EAQGa,MAAM,gBACL,QAAC,gBAAD;AAAA,qCACE,QAAC,UAAD;AAAA,wCACE,QAAC,gBAAD;AAAkB,kBAAA,EAAE,EAAC;AAArB;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA,4BAAOA,MAAM,CAAC2E;AAAd;AAAA;AAAA;AAAA;AAAA,wBAFF,eAIE,QAAC,YAAD;AACE,kBAAA,OAAO,EAAGC,CAAD,IAAO;AACdA,oBAAAA,CAAC,CAACC,cAAF;AACA9E,oBAAAA,YAAY;AACZP,oBAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,mBALH;AAAA,yCAOE,QAAC,gBAAD;AAAkB,oBAAA,EAAE,EAAC;AAArB;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,wBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADK,gBAkBL,QAAC,gBAAD;AAAA,wBACG,CAACD,SAAD,gBACC,QAAC,UAAD;AAAY,gBAAA,OAAO,EAAE,MAAMC,YAAY,CAAEsF,IAAD,IAAU,CAACA,IAAZ,CAAvC;AAAA,uCACE,QAAC,gBAAD;AACE,kBAAA,EAAE,EAAC,aADL;AAEE,kBAAA,cAAc,EAAC;AAFjB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADD,gBAQC,QAAC,cAAD;AAAA,uCACE,QAAC,MAAD;AAAQ,kBAAA,aAAa,EAAE,IAAvB;AAA6B,kBAAA,SAAS,EAAC;AAAvC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AATJ;AAAA;AAAA;AAAA;AAAA,oBA1BJ,eA2CE,QAAC,iBAAD;AAAA,sCACE,QAAC,gBAAD;AACE,gBAAA,EAAE,EAAC,wBADL;AAEE,gBAAA,cAAc,EAAC;AAFjB;AAAA;AAAA;AAAA;AAAA,sBADF,eAKE,QAAC,IAAD;AAAM,gBAAA,IAAI,EAAC,QAAX;AAAA,uCACE,QAAC,iBAAD;AAAA,yCACE,QAAC,gBAAD;AACE,oBAAA,EAAE,EAAC,kBADL;AAEE,oBAAA,cAAc,EAAC;AAFjB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBALF;AAAA;AAAA;AAAA;AAAA;AAAA,oBA3CF,eA2DE,QAAC,cAAD;AAAA,qCACE,QAAC,MAAD;AACE,gBAAA,IAAI,EAAC,QADP;AAEE,gBAAA,OAAO,EAAEnD;AACV;AAHD;AAIE,gBAAA,IAAI,EAAC,KAJP;AAKE,gBAAA,OAAO,EAAEnB,OALX;AAME,gBAAA,KAAK,EAAE;AAAEuE,kBAAAA,KAAK,EAAE;AAAT,iBANT;AAAA,uCAQE,QAAC,gBAAD;AACE,kBAAA,EAAE,EAAC,iBADL;AAEE,kBAAA,cAAc,EAAC;AAFjB;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBA3DF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAvCF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAqHE,QAAC,WAAD;AAAA,iCACE,QAAC,MAAD;AACE,YAAA,OAAO,EAAE5D,IAAI,CAAC4D,KAAL,IAAc,GAAd,GAAoB,IAApB,GAA2B,KADtC;AAEE,YAAA,GAAG,EAAE,GAFP;AAGE,YAAA,MAAM,EAAE,GAHV;AAAA,mCAKE,QAAC,SAAD;AAAA,sCACE,QAAC,KAAD;AAAA,uCACE,QAAC,gBAAD;AACE,kBAAA,EAAE,EAAC,WADL;AAEE,kBAAA,cAAc,EAAC;AAFjB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADF,eAQE,QAAC,SAAD;AAAW,gBAAA,SAAS,EAAC,oBAArB;AAAA,uCACE,QAAC,YAAD;AAAA,4BACG7E,cAAc,GAAG,CAAjB,GACCJ,KAAK,CAACkF,GAAN,CAAWC,IAAD,iBACR,QAAC,SAAD;AAAuC,oBAAA,OAAO,EAAEA;AAAhD,qBAAiB,YAAWA,IAAI,CAAC1G,EAAG,EAApC;AAAA;AAAA;AAAA;AAAA,0BADF,CADD,gBAKC;AAAA,4CACE,QAAC,YAAD;AAAA,6CACE,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,4BADF,eAKE,QAAC,YAAD;AAAA,6CACE,QAAC,gBAAD;AACE,wBAAA,EAAE,EAAC,gBADL;AAEE,wBAAA,cAAc,EAAC;AAFjB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,4BALF;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBARF,eA+BG,QAAC,kBAAD;AAAA,wCACC,QAAC,WAAD;AAAA,0CACE,QAAC,IAAD;AAAA,2CACE,QAAC,gBAAD;AACE,sBAAA,EAAE,EAAC,UADL;AAEE,sBAAA,cAAc,EAAC;AAFjB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BADF,eAOE,QAAC,IAAD;AAAA,+BACGjD,QADH,EAEG+E,sBAAsB,EAFzB;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPF;AAAA;AAAA;AAAA;AAAA;AAAA,wBADD,eAcC,QAAC,WAAD;AAAA,0CACE,QAAC,IAAD;AAAA,2CACE,QAAC,gBAAD;AACE,sBAAA,EAAE,EAAC,0BADL;AAEE,sBAAA,cAAc,EAAC;AAFjB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BADF,eAOE,QAAC,IAAD;AAAA,+BAAO/E,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAdD,eAwBC,QAAC,WAAD;AAAA,0CACE,QAAC,IAAD;AAAA,2CACE,QAAC,gBAAD;AACE,sBAAA,EAAE,EAAC,cADL;AAEE,sBAAA,cAAc,EAAC;AAFjB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BADF,eAOE,QAAC,IAAD;AAAA,+BACGA,QADH,EAEG8E,iBAAiB,EAFpB;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAxBD,eAqCC,QAAC,WAAD;AAAa,kBAAA,KAAK,EAAE;AAAE8E,oBAAAA,SAAS,EAAE;AAAb,mBAApB;AAAA,0CACE,QAAC,IAAD;AAAA,4CACE,QAAC,gBAAD;AAAkB,sBAAA,EAAE,EAAC,WAArB;AAAiC,sBAAA,cAAc,EAAC;AAAhD;AAAA;AAAA;AAAA;AAAA,4BADF,EAC6D,GAD7D,eAEE,QAAC,KAAD;AAAA,mDAEE,QAAC,gBAAD;AACE,wBAAA,EAAE,EAAC,SADL;AAEE,wBAAA,cAAc,EAAC;AAFjB;AAAA;AAAA;AAAA;AAAA,8BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,4BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAYE,QAAC,IAAD;AAAA,+BACG5J,QADH,EAEG6E,cAAc,EAFjB;AAAA;AAAA;AAAA;AAAA;AAAA,0BAZF;AAAA;AAAA;AAAA;AAAA;AAAA,wBArCD;AAAA;AAAA;AAAA;AAAA;AAAA,sBA/BH;AAAA;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBArHF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAJF;AAAA;AAAA;AAAA;AAAA;AAAA,UAFF;AA+ND,CApXD;;AAsXA,eAAenB,mBAAf","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport { Button } from 'components/button/button';\nimport { CURRENCY } from 'utils/constant';\nimport { Scrollbar } from 'components/scrollbar/scrollbar';\nimport CheckoutWrapper, {\n  CheckoutContainer,\n  CheckoutInformation,\n  InformationBox,\n  DeliverySchedule,\n  CheckoutSubmit,\n  HaveCoupon,\n  CouponBoxWrapper,\n  CouponInputBox,\n  CouponCode,\n  RemoveCoupon,\n  TermConditionText,\n  TermConditionLink,\n  CartWrapper,\n  CalculationWrapper,\n  OrderInfo,\n  Title,\n  ItemsWrapper,\n  Items,\n  Quantity,\n  Multiplier,\n  ItemInfo,\n  Price,\n  TextWrapper,\n  Text,\n  Bold,\n  Small,\n  NoProductMsg,\n  NoProductImg,\n} from './checkout-two.style';\n\nimport { NoCartBag } from 'assets/icons/NoCartBag';\nimport Sticky from 'react-stickynode';\nimport { ProfileContext } from 'contexts/profile/profile.context';\nimport { FormattedMessage } from 'react-intl';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { useLocale } from 'contexts/language/language.provider';\nimport { useWindowSize } from 'utils/useWindowSize';\nimport Coupon from 'features/coupon/coupon';\nimport Address from 'features/address/address';\nimport Contact from 'features/contact/contact';\nimport { ADD_ORDER } from 'utils/graphql/mutation/order';\nimport { GET_ORDERS_OPEN } from 'utils/graphql/query/orders.query';\nimport { SET_CLIENTE } from 'utils/graphql/mutation/register_client';\nimport { useQuery, useMutation, gql } from '@apollo/client';\nimport Cookies  from 'universal-cookie';\nimport Payment from 'features/payment/payment';\n\n// The type of props Checkout Form receives\ninterface MyFormProps {\n  token: string;\n  deviceType: any;\n  clienteData: any;\n}\n\ntype CartItemProps = {\n  product: any;\n};\n\n\nconst OrderItem: React.FC<CartItemProps> = ({ product }) => {\n\n  const { id, quantity, title, nombre, unit, precio, precio_venta } = product;\n  const displayPrice = precio_venta ? precio_venta : precio;\n\n  \n\n  return (\n    <Items key={id}>\n      <Quantity>{quantity}</Quantity>\n      <Multiplier>x</Multiplier>\n      <ItemInfo>\n        {nombre ? nombre : title} {unit ? `| ${unit}` : ''}\n      </ItemInfo>\n      <Price>\n        {CURRENCY}\n        {(displayPrice * quantity).toFixed(0)}\n      </Price>\n    </Items>\n  );\n};\n\ntype OrderReceivedProps = {\n  order: any,\n  date: any,\n  total:  any\n};\n\nconst CheckoutWithSidebar: React.FC<MyFormProps> = ({ clienteData, token, deviceType }) => {\n  const cookie = new Cookies();\n  const cid = cookie.get('cid')  \n  const [hasCoupon, setHasCoupon] = useState(false);\n  const { state } = useContext(ProfileContext);\n  const { isRtl } = useLocale();\n  const [addOrder, {error}] = useMutation(ADD_ORDER );\n  const [setCliente] = useMutation(SET_CLIENTE);\n  const {\n    items,\n    removeCoupon,\n    coupon,\n    clearCart,\n    cartItemsCount,\n    calculatePrice,\n    calculateDiscount,\n    calculateSubTotalPrice,\n    isRestaurant,\n    toggleRestaurant,\n  } = useCart();\n  let [loading, setLoading] = useState(false); \n  const [clienteid] = useState(0); \n  let { card, schedules } = state;  \n  const [address, setAddress] = useState(clienteData.addresses);\n  const [contact, setContact] = useState(clienteData.contacts); \n  const size = useWindowSize();\n  const { data } = useQuery(\n    GET_ORDERS_OPEN,\n    {\n      variables: {\n        clientid: config().SUBSCRIPTION_ID,\n        cliente: clienteData.id\n      },\n      notifyOnNetworkStatusChange: true,\n    }\n  ); \n \n\n\n  const handleSubmit = async () => {\n     \n    if ( \n         cartItemsCount > 0   &&\n         clienteData.addresses && clienteData.addresses.length > 0 &&\n         clienteData.contacts && clienteData.contacts.length > 0\n       ) {   \n         setLoading(true);\n\n         // Set Client\n         await setCliente({\n          variables: {\n                    clientid: cid,\n                    id: cookie.get('customer').id,\n                    imageURL: cookie.get('user_logged').image\n                    }\n        });\n\n       await processOrder();\n        \n       }\n} \n       \nconst processOrder = async () => {        \n    var today = new Date(),\n    date = today.getDate() + \"/\" +\n    (today.getMonth() + 1) + \"/\" +\n    today.getFullYear() + \"  \" +\n    today.getHours() + \":\" +\n    today.getMinutes() + \":\" +\n    today.getSeconds();\n\n    today.setMinutes(today.getMinutes() + 30);\n   \n  \n    var datedelivery = today.getDate() + \"/\" +\n    (today.getMonth() + 1) + \"/\" +\n    today.getFullYear() + \"  \" +\n    today.getHours() + \":\" +\n    today.getMinutes() + \":\" +\n    today.getSeconds(); \n      sessionStorage.setItem('items',JSON.stringify(items))\n      sessionStorage.setItem('address',clienteData && clienteData.addresses.length > 0 ? clienteData.addresses[0].info: '[]')\n      sessionStorage.setItem('contact',clienteData && clienteData.contacts.length > 0 ? clienteData.contacts[0].number: '[]')\n      sessionStorage.setItem('itemscount',cartItemsCount)\n      sessionStorage.setItem('date',date.toString())\n      sessionStorage.setItem('datedelivery',datedelivery.toString())\n      sessionStorage.setItem('total',calculatePrice())\n      sessionStorage.setItem('discount',calculateDiscount())\n      sessionStorage.setItem('subtotal',calculateSubTotalPrice()) \n      await add_order() // backend\n      clearCart();\n      Router.push('/order-received');\n      \n    setLoading(false);\n  };\n\n  const add_order = async () => {\n  \n    sessionStorage.setItem('order',Date.now().toString()) \n    await addOrder({\n      variables: {\n                clientid: config().SUBSCRIPTION_ID,\n                cliente: cookie.get('customer').id,\n                total: calculatePrice(), \n                subtotal: calculateSubTotalPrice(), \n                metodo_pago: 'card', \n                order: sessionStorage.getItem('order'), \n                items: JSON.stringify(items),\n                itemcount: cartItemsCount,\n                discount: calculateDiscount(),\n                delivery_date: sessionStorage.getItem('datedelivery'),\n                order_date: sessionStorage.getItem('date'),\n                delivery_address: clienteData.addresses[0].info,\n                contacto: sessionStorage.getItem('contact'),\n                status: 'Procesando',\n                received: true,\n                estado: 'Normal'\n                }\n    });\n    console.log('ingreando add_order termino satisfactoriamente')\n\n  }\n\n  const existeOrden = async () => {\n\n   \n    if(data) {\n      if( data.pedido && data.pedido.length > 0) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n    return false;\n\n  }\n\n \n\n  useEffect(() => {\n    return () => {\n      if (isRestaurant) {\n        toggleRestaurant();\n        clearCart();\n      }\n     \n    };\n  }, []);\n\n  return (\n    \n    <form>\n      <br/>\n      <br/>\n      <br/>\n      <CheckoutWrapper>\n        <CheckoutContainer>\n          <CheckoutInformation>\n            {/* Direccion  de consumidor */}\n            <InformationBox>\n              <Address\n                address={clienteData.addresses}\n                increment={true}\n                flexStart={true}\n                buttonProps={{\n                  variant: 'text',\n                  type: 'button',\n                  className: 'addButton',\n                }}\n                icon={true}\n              />\n            </InformationBox>\n              \n            \n          {/*   <InformationBox>\n              <DeliverySchedule>\n                <Schedules increment={true} />\n              </DeliverySchedule>\n            </InformationBox>\n */}\n         \n            <InformationBox>\n              <Contact\n                contacts={clienteData.contacts}\n                increment={true}\n                flexStart={true}\n                buttonProps={{\n                  variant: 'text',\n                  type: 'button',\n                  className: 'addButton',\n                }}\n                icon={true}\n              />\n            </InformationBox>\n           \n \n            <InformationBox\n              className='paymentBox'\n              style={{ paddingBottom: 30 }}\n            >\n             \n              <Payment increment={true} deviceType={deviceType} />\n \n              \n              {coupon ? (\n                <CouponBoxWrapper>\n                  <CouponCode>\n                    <FormattedMessage id='couponApplied' />\n                    <span>{coupon.code}</span>\n\n                    <RemoveCoupon\n                      onClick={(e) => {\n                        e.preventDefault();\n                        removeCoupon();\n                        setHasCoupon(false);\n                      }}\n                    >\n                      <FormattedMessage id='removeCoupon' />\n                    </RemoveCoupon>\n                  </CouponCode>\n                </CouponBoxWrapper>\n              ) : (\n                <CouponBoxWrapper>\n                  {!hasCoupon ? (\n                    <HaveCoupon onClick={() => setHasCoupon((prev) => !prev)}>\n                      <FormattedMessage\n                        id='specialCode'\n                        defaultMessage='Tienes un código especial?'\n                      />\n                    </HaveCoupon>\n                  ) : (\n                    <CouponInputBox>\n                      <Coupon errorMsgFixed={true} className='normalCoupon' />\n                    </CouponInputBox>\n                  )}\n                </CouponBoxWrapper>\n              )}\n         \n\n              <TermConditionText>\n                <FormattedMessage\n                  id='termAndConditionHelper'\n                  defaultMessage='By making this purchase you agree to our'\n                />\n                <Link href='/terms'>\n                  <TermConditionLink>\n                    <FormattedMessage\n                      id='termAndCondition'\n                      defaultMessage='Términos y Condiciones.'\n                    />\n                  </TermConditionLink>\n                </Link>\n              </TermConditionText>\n           \n            \n              <CheckoutSubmit>\n                <Button\n                  type='button'\n                  onClick={handleSubmit}\n                 /*  disabled={!isValid} */\n                  size='big'\n                  loading={loading}\n                  style={{ width: '100%' }}\n                >\n                  <FormattedMessage\n                    id='processCheckout'\n                    defaultMessage='Procesar Checkout'\n                  />\n                </Button>\n              </CheckoutSubmit>\n            </InformationBox> \n          </CheckoutInformation> \n\n          <CartWrapper>\n            <Sticky\n              enabled={size.width >= 768 ? true : false}\n              top={120}\n              innerZ={999}\n            >\n              <OrderInfo>\n                <Title>\n                  <FormattedMessage\n                    id='cartTitle'\n                    defaultMessage='Mi Pedido'\n                  />\n                </Title>\n\n                <Scrollbar className='checkout-scrollbar'>\n                  <ItemsWrapper>\n                    {cartItemsCount > 0 ? (\n                      items.map((item) => (\n                        <OrderItem key={`cartItem-${item.id}`} product={item} />\n                      ))\n                    ) : (\n                      <>\n                        <NoProductImg>\n                          <NoCartBag />\n                        </NoProductImg>\n\n                        <NoProductMsg>\n                          <FormattedMessage\n                            id='noProductFound'\n                            defaultMessage='No hay productos encontrados'\n                          />\n                        </NoProductMsg>\n                      </>\n                    )}\n                  </ItemsWrapper>\n                </Scrollbar>\n\n                 <CalculationWrapper>\n                  <TextWrapper>\n                    <Text>\n                      <FormattedMessage\n                        id='subTotal'\n                        defaultMessage='Sub Total'\n                      />\n                    </Text>\n                    <Text>\n                      {CURRENCY}\n                      {calculateSubTotalPrice()}\n                    </Text>\n                  </TextWrapper>\n\n                  <TextWrapper>\n                    <Text>\n                      <FormattedMessage\n                        id='intlOrderDetailsDelivery'\n                        defaultMessage='Delivery Fee'\n                      />\n                    </Text>\n                    <Text>{CURRENCY}0</Text>\n                  </TextWrapper>\n\n                  <TextWrapper>\n                    <Text>\n                      <FormattedMessage\n                        id='discountText'\n                        defaultMessage='Descuento'\n                      />\n                    </Text>\n                    <Text>\n                      {CURRENCY}\n                      {calculateDiscount()}\n                    </Text>\n                  </TextWrapper>\n\n                  <TextWrapper style={{ marginTop: 20 }}>\n                    <Bold>\n                      <FormattedMessage id='totalText' defaultMessage='Total' />{' '}\n                      <Small>\n                        (\n                        <FormattedMessage\n                          id='vatText'\n                          defaultMessage='Incl. VAT'\n                        />\n                        )\n                      </Small>\n                    </Bold>\n                    <Bold>\n                      {CURRENCY}\n                      {calculatePrice()}\n                    </Bold>\n                  </TextWrapper>\n                </CalculationWrapper> \n              </OrderInfo>\n            </Sticky>\n          </CartWrapper>\n        </CheckoutContainer>\n      </CheckoutWrapper>\n    </form>\n  );\n};\n\nexport default CheckoutWithSidebar;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/components/product-grid/product-list/product-list.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport { ProductsRow, ProductsCol, ButtonWrapper, LoaderWrapper, LoaderItem, ProductCardWrapper } from './product-list.style';\nimport { CURRENCY } from 'utils/constant';\nimport { useQuery, NetworkStatus } from '@apollo/client';\nimport Placeholder from 'components/placeholder/placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/no-result/no-result';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'components/button/loadmore-button';\nimport config from '../../../setting/config';\nimport { GET_CATEGORIAS } from 'utils/graphql/query/categorias.query';\nimport { GET_PRODUCTS_X_CATEGORIA } from 'utils/graphql/query/products.query';\nvar ErrorMessage = dynamic(_c = function _c() {\n  return import('components/error-message/error-message');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('components/error-message/error-message')];\n    },\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/error-message/error-message']\n  }\n});\n_c2 = ErrorMessage;\nvar GeneralCard = dynamic(_c3 = function _c3() {\n  return import('components/product-card/product-card-one/product-card-one');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('components/product-card/product-card-one/product-card-one')];\n    },\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/product-card/product-card-one/product-card-one']\n  }\n});\n_c4 = GeneralCard;\nvar BookCard = dynamic(_c5 = function _c5() {\n  return import('components/product-card/product-card-two/product-card-two');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('components/product-card/product-card-two/product-card-two')];\n    },\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/product-card/product-card-two/product-card-two']\n  }\n});\n_c6 = BookCard;\nvar FurnitureCard = dynamic(_c7 = function _c7() {\n  return import('components/product-card/product-card-three/product-card-three');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('components/product-card/product-card-three/product-card-three')];\n    },\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/product-card/product-card-three/product-card-three']\n  }\n});\n_c8 = FurnitureCard;\nvar MedicineCard = dynamic(_c9 = function _c9() {\n  return import('components/product-card/product-card-five/product-card-five');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('components/product-card/product-card-five/product-card-five')];\n    },\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/product-card/product-card-five/product-card-five']\n  }\n});\n_c10 = MedicineCard;\nexport var Products = function Products(_ref) {\n  _s();\n\n  var deviceType = _ref.deviceType,\n      _ref$fetchLimit = _ref.fetchLimit,\n      fetchLimit = _ref$fetchLimit === void 0 ? 40 : _ref$fetchLimit,\n      _ref$loadMore = _ref.loadMore,\n      loadMore = _ref$loadMore === void 0 ? true : _ref$loadMore,\n      type = _ref.type;\n  var router = useRouter();\n  var cid = config().SUBSCRIPTION_ID;\n\n  var _useRouter = useRouter(),\n      query = _useRouter.query;\n\n  var _useQuery = useQuery(GET_CATEGORIAS, {\n    variables: {\n      clientid: cid\n    },\n    notifyOnNetworkStatusChange: true\n  }),\n      data = _useQuery.data,\n      error = _useQuery.error;\n\n  console.log('pico', data.categorias[0].name);\n\n  var _useQuery2 = useQuery(GET_PRODUCTS_X_CATEGORIA, {\n    variables: {\n      clientid: cid,\n      categoria: query.category === null ? data.categorias[0].name : query.category\n    },\n    notifyOnNetworkStatusChange: true\n  }),\n      data1 = _useQuery2.data,\n      error1 = _useQuery2.error,\n      loading = _useQuery2.loading,\n      fetchMore = _useQuery2.fetchMore,\n      networkStatus = _useQuery2.networkStatus;\n\n  var loadingMore = networkStatus === NetworkStatus.fetchMore;\n  if (error) return /*#__PURE__*/_jsxDEV(ErrorMessage, {\n    message: error.message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 21\n  }, _this);\n\n  if (loading && !loadingMore) {\n    return /*#__PURE__*/_jsxDEV(LoaderWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(LoaderItem, {\n        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n          uniqueKey: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(LoaderItem, {\n        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n          uniqueKey: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(LoaderItem, {\n        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n          uniqueKey: \"3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(LoaderItem, {\n        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n          uniqueKey: \"4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, _this);\n  }\n\n  if (!data1 || !data1.producto || data1.producto.length === 0) {\n    return /*#__PURE__*/_jsxDEV(NoResultFound, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 12\n    }, _this);\n  }\n\n  var handleLoadMore = function handleLoadMore() {\n    fetchMore({\n      variables: {\n        offset: Number(data1.producto.length),\n        limit: fetchLimit\n      }\n    });\n  };\n\n  var renderCard = function renderCard(productType, props) {\n    switch (productType) {\n      case 'book':\n        return /*#__PURE__*/_jsxDEV(BookCard, {\n          title: props.nombre,\n          image: props.imageURL,\n          name: props === null || props === void 0 ? void 0 : props.nombre,\n          data: props,\n          deviceType: deviceType,\n          onClick: function onClick() {\n            router.push('/product/[slug]', \"/product/\".concat(props.slug));\n\n            if (true) {\n              window.scrollTo(0, 0);\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, _this);\n\n      case 'medicine':\n        return /*#__PURE__*/_jsxDEV(MedicineCard, {\n          title: props.title,\n          currency: CURRENCY,\n          image: props.image,\n          price: props.price,\n          weight: props.unit,\n          data: props\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, _this);\n\n      case 'furniture':\n        return /*#__PURE__*/_jsxDEV(FurnitureCard, {\n          title: props.title,\n          image: props.gallery[0].url,\n          discountInPercent: props.discountInPercent,\n          data: props,\n          deviceType: deviceType\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, _this);\n\n      default:\n        return /*#__PURE__*/_jsxDEV(GeneralCard, {\n          title: props.nombre,\n          description: props === null || props === void 0 ? void 0 : props.descripcion,\n          image: props.imageURL,\n          weight: props.unit,\n          currency: CURRENCY,\n          price: props.precio,\n          salePrice: props.precio_venta,\n          discountInPercent: props.descuento,\n          data: props,\n          deviceType: deviceType\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, _this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ProductsRow, {\n      children: data1.producto.map(function (item, index) {\n        return /*#__PURE__*/_jsxDEV(ProductsCol, {\n          style: type === 'book' ? {\n            paddingLeft: 0,\n            paddingRight: 1\n          } : {},\n          children: /*#__PURE__*/_jsxDEV(ProductCardWrapper, {\n            children: /*#__PURE__*/_jsxDEV(Fade, {\n              duration: 800,\n              delay: index * 10,\n              style: {\n                height: '100%'\n              },\n              children: renderCard(type, item)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, _this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, _this), loadMore && data1.producto.hasMore && /*#__PURE__*/_jsxDEV(ButtonWrapper, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleLoadMore,\n        loading: loadingMore,\n        variant: \"secondary\",\n        style: {\n          fontSize: 14\n        },\n        border: \"1px solid #f1f1f1\",\n        children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n          id: \"loadMoreButton\",\n          defaultMessage: \"Cargar Mas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Products, \"VrQfr1H0L5rvQw1so7OeYxLderU=\", false, function () {\n  return [useRouter, useRouter, useQuery, useQuery];\n});\n\n_c11 = Products;\nexport default Products;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;\n\n$RefreshReg$(_c, \"ErrorMessage$dynamic\");\n$RefreshReg$(_c2, \"ErrorMessage\");\n$RefreshReg$(_c3, \"GeneralCard$dynamic\");\n$RefreshReg$(_c4, \"GeneralCard\");\n$RefreshReg$(_c5, \"BookCard$dynamic\");\n$RefreshReg$(_c6, \"BookCard\");\n$RefreshReg$(_c7, \"FurnitureCard$dynamic\");\n$RefreshReg$(_c8, \"FurnitureCard\");\n$RefreshReg$(_c9, \"MedicineCard$dynamic\");\n$RefreshReg$(_c10, \"MedicineCard\");\n$RefreshReg$(_c11, \"Products\");","map":{"version":3,"sources":["/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/components/product-grid/product-list/product-list.tsx"],"names":["React","useRouter","dynamic","ProductsRow","ProductsCol","ButtonWrapper","LoaderWrapper","LoaderItem","ProductCardWrapper","CURRENCY","useQuery","NetworkStatus","Placeholder","Fade","NoResultFound","FormattedMessage","Button","config","GET_CATEGORIAS","GET_PRODUCTS_X_CATEGORIA","ErrorMessage","GeneralCard","BookCard","FurnitureCard","MedicineCard","Products","deviceType","fetchLimit","loadMore","type","router","cid","SUBSCRIPTION_ID","query","variables","clientid","notifyOnNetworkStatusChange","data","error","console","log","categorias","name","categoria","category","data1","error1","loading","fetchMore","networkStatus","loadingMore","message","producto","length","handleLoadMore","offset","Number","limit","renderCard","productType","props","nombre","imageURL","push","slug","window","scrollTo","title","image","price","unit","gallery","url","discountInPercent","descripcion","precio","precio_venta","descuento","map","item","index","paddingLeft","paddingRight","height","hasMore","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport {\n  ProductsRow,\n  ProductsCol,\n  ButtonWrapper,\n  LoaderWrapper,\n  LoaderItem,\n  ProductCardWrapper,\n} from './product-list.style';\nimport {\n  BrowserRouter as Router,\n  Link,\n  useLocation\n} from \"react-router-dom\";\nimport { CURRENCY } from 'utils/constant';\nimport { useQuery, NetworkStatus } from '@apollo/client';\nimport Placeholder from 'components/placeholder/placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/no-result/no-result';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'components/button/loadmore-button';\nimport config from '../../../setting/config';\nimport { GET_PRODUCTS } from 'graphql/query/products.query';\nimport { GET_CATEGORIAS } from 'utils/graphql/query/categorias.query';\nimport { GET_PRODUCTS_X_CATEGORIA } from 'utils/graphql/query/products.query';\nimport { useEffect } from 'react';\nimport { useState } from 'react';\n\n\nconst ErrorMessage = dynamic(() =>\n  import('components/error-message/error-message')\n);\n\nconst GeneralCard = dynamic(\n  import('components/product-card/product-card-one/product-card-one')\n);\nconst BookCard = dynamic(\n  import('components/product-card/product-card-two/product-card-two')\n);\nconst FurnitureCard = dynamic(\n  import('components/product-card/product-card-three/product-card-three')\n);\nconst MedicineCard = dynamic(\n  import('components/product-card/product-card-five/product-card-five')\n);\n\n \n\ntype ProductsProps = {\n  deviceType?: {\n    mobile: boolean;\n    tablet: boolean;\n    desktop: boolean;\n  };\n  fetchLimit?: number;\n  loadMore?: boolean;\n  type?: string; \n};\nexport const Products: React.FC<ProductsProps> = ({\n  deviceType,\n  fetchLimit = 40,\n  loadMore = true,\n  type \n}) => {\n  const router = useRouter();\n  const cid =  config().SUBSCRIPTION_ID;\n \n  const { query } = useRouter();\n \n  let { data, error } = useQuery(\n    GET_CATEGORIAS,\n    {\n      variables: {\n        clientid: cid, \n      },\n      notifyOnNetworkStatusChange: true,\n    }\n  );\n\n  console.log('pico',data.categorias[0].name)\n  let { data:data1, error:error1, loading, fetchMore, networkStatus } = useQuery(\n    GET_PRODUCTS_X_CATEGORIA,\n    {\n      variables: {\n        clientid: cid,\n        categoria: query.category===null?data.categorias[0].name:query.category\n      },\n      notifyOnNetworkStatusChange: true,\n    }\n  );\n  \n   \n\n  const loadingMore = networkStatus === NetworkStatus.fetchMore;\n\n  if (error) return <ErrorMessage message={error.message} />;\n  if (loading && !loadingMore) {\n    return (\n      <LoaderWrapper>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"1\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"2\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"3\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"4\" />\n        </LoaderItem> \n      </LoaderWrapper>\n    );\n  }\n\n  if (!data1 || !data1.producto || data1.producto.length === 0) {\n    return <NoResultFound />;\n  }\n  const handleLoadMore = () => {\n    fetchMore({\n      variables: {\n        offset: Number(data1.producto.length),\n        limit: fetchLimit,\n      },\n    });\n  };\n\n  const renderCard = (productType, props) => {\n    \n    switch (productType) {\n      case 'book':\n        return (\n          <BookCard\n            title={props.nombre}\n            image={props.imageURL}\n            name={props?.nombre}\n            data={props}\n            deviceType={deviceType}\n            onClick={() => {\n              router.push('/product/[slug]', `/product/${props.slug}`);\n              if (typeof window !== 'undefined') {\n                window.scrollTo(0, 0);\n              }\n            }}\n          />\n        );\n      case 'medicine':\n        return (\n          <MedicineCard\n            title={props.title}\n            currency={CURRENCY}\n            image={props.image}\n            price={props.price}\n            weight={props.unit}\n            data={props}\n          />\n        );\n      case 'furniture':\n        return (\n          <FurnitureCard\n            title={props.title}\n            image={props.gallery[0].url}\n            discountInPercent={props.discountInPercent}\n            data={props}\n            deviceType={deviceType}\n          />\n        );\n      default:\n        return (\n          <GeneralCard\n            title={props.nombre}\n            description={props?.descripcion}\n            image={props.imageURL}\n            weight={props.unit}\n            currency={CURRENCY}\n            price={props.precio}\n            salePrice={props.precio_venta}\n            discountInPercent={props.descuento}\n            data={props}\n            deviceType={deviceType}\n          />\n        );\n    }\n  };\n  return (\n    <>\n      <ProductsRow>\n        {data1.producto.map((item: any, index: number) => (\n          <ProductsCol\n            key={index}\n            style={type === 'book' ? { paddingLeft: 0, paddingRight: 1 } : {}}\n          >\n            <ProductCardWrapper>\n              <Fade\n                duration={800}\n                delay={index * 10}\n                style={{ height: '100%' }}\n              >\n                {renderCard(type, item)}\n              </Fade>\n            </ProductCardWrapper>\n          </ProductsCol>\n        ))}\n      </ProductsRow>\n      {loadMore && data1.producto.hasMore && (\n        <ButtonWrapper>\n          <Button\n            onClick={handleLoadMore}\n            loading={loadingMore}\n            variant=\"secondary\"\n            style={{\n              fontSize: 14,\n            }}\n            border=\"1px solid #f1f1f1\"\n          >\n            <FormattedMessage id=\"loadMoreButton\" defaultMessage=\"Cargar Mas\" />\n          </Button>\n        </ButtonWrapper>\n      )}\n    </>\n  );\n};\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}
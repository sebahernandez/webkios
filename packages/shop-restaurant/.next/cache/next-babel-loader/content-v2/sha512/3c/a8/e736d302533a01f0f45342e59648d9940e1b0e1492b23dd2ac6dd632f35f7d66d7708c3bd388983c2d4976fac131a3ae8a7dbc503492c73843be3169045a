{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/alejandrosandoval/space/world_eserp/web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/alejandrosandoval/space/world_eserp/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/alejandrosandoval/space/world_eserp/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/features/payment/payment.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useContext } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { handleModal } from 'features/checkouts/checkout-modal';\nimport { ProfileContext } from 'contexts/profile/profile.context';\nimport PaymentGroup from 'components/payment-group/payment-group';\nimport StripePaymentForm from './stripe-form';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { useMutation } from '@apollo/client';\nimport { DELETE_CARD } from 'graphql/mutation/card';\nimport { CardHeader } from 'components/card-header/card-header';\n\nvar Payment = function Payment(_ref) {\n  _s();\n\n  var deviceType = _ref.deviceType,\n      _ref$increment = _ref.increment,\n      increment = _ref$increment === void 0 ? false : _ref$increment;\n\n  var _useMutation = useMutation(DELETE_CARD),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      deletePaymentCardMutation = _useMutation2[0];\n\n  var _useCart = useCart(),\n      calculatePrice = _useCart.calculatePrice;\n\n  var _useContext = useContext(ProfileContext),\n      card = _useContext.state.card,\n      dispatch = _useContext.dispatch;\n\n  var handleOnDelete = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(item) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch({\n                type: 'DELETE_CARD',\n                payload: item.id\n              });\n              _context.next = 3;\n              return deletePaymentCardMutation({\n                variables: {\n                  cardId: JSON.stringify(item.id)\n                }\n              });\n\n            case 3:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleOnDelete(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n      increment: increment,\n      children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n        id: \"selectPaymentText\",\n        defaultMessage: \"Select Payment Option\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(PaymentGroup, {\n      name: \"payment\",\n      deviceType: deviceType,\n      items: card,\n      onDelete: function onDelete(item) {\n        return handleOnDelete(item);\n      },\n      onChange: function onChange(item) {\n        return dispatch({\n          type: 'SET_PRIMARY_CARD',\n          payload: item.id.toString()\n        });\n      },\n      handleAddNewCard: function handleAddNewCard() {\n        handleModal(StripePaymentForm, {\n          totalPrice: calculatePrice()\n        }, 'add-address-modal stripe-modal');\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Payment, \"Nvn33i3RpZrF+LbtUAQV/cBJ9AY=\", false, function () {\n  return [useMutation, useCart];\n});\n\n_c = Payment;\nexport default Payment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Payment\");","map":{"version":3,"sources":["/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/features/payment/payment.tsx"],"names":["React","useContext","FormattedMessage","handleModal","ProfileContext","PaymentGroup","StripePaymentForm","useCart","useMutation","DELETE_CARD","CardHeader","Payment","deviceType","increment","deletePaymentCardMutation","calculatePrice","card","state","dispatch","handleOnDelete","item","type","payload","id","variables","cardId","JSON","stringify","toString","totalPrice"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,gBAAT,QAAiC,YAAjC;AACA,SAASC,WAAT,QAA4B,mCAA5B;AACA,SAASC,cAAT,QAA+B,kCAA/B;AACA,OAAOC,YAAP,MAAyB,wCAAzB;AACA,OAAOC,iBAAP,MAA8B,eAA9B;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,SAASC,WAAT,QAA4B,uBAA5B;AACA,SAASC,UAAT,QAA2B,oCAA3B;;AAMA,IAAMC,OAAO,GAAG,SAAVA,OAAU,OAA8C;AAAA;;AAAA,MAA3CC,UAA2C,QAA3CA,UAA2C;AAAA,4BAA/BC,SAA+B;AAAA,MAA/BA,SAA+B,+BAAnB,KAAmB;;AAAA,qBACxBL,WAAW,CAACC,WAAD,CADa;AAAA;AAAA,MACrDK,yBADqD;;AAAA,iBAEjCP,OAAO,EAF0B;AAAA,MAEpDQ,cAFoD,YAEpDA,cAFoD;;AAAA,oBAOxDd,UAAU,CAACG,cAAD,CAP8C;AAAA,MAKjDY,IALiD,eAK1DC,KAL0D,CAKjDD,IALiD;AAAA,MAM1DE,QAN0D,eAM1DA,QAN0D;;AAS5D,MAAMC,cAAc;AAAA,yEAAG,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AACrBF,cAAAA,QAAQ,CAAC;AAAEG,gBAAAA,IAAI,EAAE,aAAR;AAAuBC,gBAAAA,OAAO,EAAEF,IAAI,CAACG;AAArC,eAAD,CAAR;AADqB;AAAA,qBAERT,yBAAyB,CAAC;AACrCU,gBAAAA,SAAS,EAAE;AAAEC,kBAAAA,MAAM,EAAEC,IAAI,CAACC,SAAL,CAAeP,IAAI,CAACG,EAApB;AAAV;AAD0B,eAAD,CAFjB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAdJ,cAAc;AAAA;AAAA;AAAA,KAApB;;AAMA,sBACE;AAAA,4BACE,QAAC,UAAD;AAAY,MAAA,SAAS,EAAEN,SAAvB;AAAA,6BACE,QAAC,gBAAD;AACE,QAAA,EAAE,EAAC,mBADL;AAEE,QAAA,cAAc,EAAC;AAFjB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,aADF,eAOE,QAAC,YAAD;AACE,MAAA,IAAI,EAAC,SADP;AAEE,MAAA,UAAU,EAAED,UAFd;AAGE,MAAA,KAAK,EAAEI,IAHT;AAIE,MAAA,QAAQ,EAAE,kBAACI,IAAD;AAAA,eAAUD,cAAc,CAACC,IAAD,CAAxB;AAAA,OAJZ;AAKE,MAAA,QAAQ,EAAE,kBAACA,IAAD;AAAA,eACRF,QAAQ,CAAC;AACPG,UAAAA,IAAI,EAAE,kBADC;AAEPC,UAAAA,OAAO,EAAEF,IAAI,CAACG,EAAL,CAAQK,QAAR;AAFF,SAAD,CADA;AAAA,OALZ;AAWE,MAAA,gBAAgB,EAAE,4BAAM;AACtBzB,QAAAA,WAAW,CACTG,iBADS,EAET;AAAEuB,UAAAA,UAAU,EAAEd,cAAc;AAA5B,SAFS,EAGT,gCAHS,CAAX;AAKD;AAjBH;AAAA;AAAA;AAAA;AAAA,aAPF;AAAA,kBADF;AA6BD,CA5CD;;GAAMJ,O;UACgCH,W,EACTD,O;;;KAFvBI,O;AA8CN,eAAeA,OAAf","sourcesContent":["import React, { useContext } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { handleModal } from 'features/checkouts/checkout-modal';\nimport { ProfileContext } from 'contexts/profile/profile.context';\nimport PaymentGroup from 'components/payment-group/payment-group';\nimport StripePaymentForm from './stripe-form';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { useMutation } from '@apollo/client';\nimport { DELETE_CARD } from 'graphql/mutation/card';\nimport { CardHeader } from 'components/card-header/card-header';\ninterface Props {\n  deviceType: any;\n  increment?: boolean;\n}\n\nconst Payment = ({ deviceType, increment = false }: Props) => {\n  const [deletePaymentCardMutation] = useMutation(DELETE_CARD);\n  const { calculatePrice } = useCart();\n\n  const {\n    state: { card },\n    dispatch,\n  } = useContext(ProfileContext);\n\n  const handleOnDelete = async (item) => {\n    dispatch({ type: 'DELETE_CARD', payload: item.id });\n    return await deletePaymentCardMutation({\n      variables: { cardId: JSON.stringify(item.id) },\n    });\n  };\n  return (\n    <>\n      <CardHeader increment={increment}>\n        <FormattedMessage\n          id=\"selectPaymentText\"\n          defaultMessage=\"Select Payment Option\"\n        />\n      </CardHeader>\n      <PaymentGroup\n        name=\"payment\"\n        deviceType={deviceType}\n        items={card}\n        onDelete={(item) => handleOnDelete(item)}\n        onChange={(item: any) =>\n          dispatch({\n            type: 'SET_PRIMARY_CARD',\n            payload: item.id.toString(),\n          })\n        }\n        handleAddNewCard={() => {\n          handleModal(\n            StripePaymentForm,\n            { totalPrice: calculatePrice() },\n            'add-address-modal stripe-modal'\n          );\n        }}\n      />\n    </>\n  );\n};\n\nexport default Payment;\n"]},"metadata":{},"sourceType":"module"}
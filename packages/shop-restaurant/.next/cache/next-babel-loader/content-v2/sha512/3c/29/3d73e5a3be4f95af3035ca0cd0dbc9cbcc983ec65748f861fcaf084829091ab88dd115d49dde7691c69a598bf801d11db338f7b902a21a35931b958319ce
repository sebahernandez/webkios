{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useContext } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { handleModal } from 'features/checkouts/checkout-modal';\nimport { ProfileContext } from 'contexts/profile/profile.context';\nimport PaymentGroup from 'components/payment-group/payment-group';\nimport StripePaymentForm from './stripe-form';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { useMutation } from '@apollo/client';\nimport { DELETE_CARD } from 'graphql/mutation/card';\nimport { CardHeader } from 'components/card-header/card-header';\n\nconst Payment = ({\n  deviceType,\n  increment = false\n}) => {\n  const [deletePaymentCardMutation] = useMutation(DELETE_CARD);\n  const {\n    calculatePrice\n  } = useCart();\n  const {\n    state: {\n      card\n    },\n    dispatch\n  } = useContext(ProfileContext);\n\n  const handleOnDelete = async item => {\n    dispatch({\n      type: 'DELETE_CARD',\n      payload: item.id\n    });\n    return await deletePaymentCardMutation({\n      variables: {\n        cardId: JSON.stringify(item.id)\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(CardHeader, {\n      increment: increment,\n      children: /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"selectPaymentText\",\n        defaultMessage: \"Select Payment Option\"\n      })\n    }), /*#__PURE__*/_jsx(PaymentGroup, {\n      name: \"payment\",\n      deviceType: deviceType,\n      items: card,\n      onDelete: item => handleOnDelete(item),\n      onChange: item => dispatch({\n        type: 'SET_PRIMARY_CARD',\n        payload: item.id.toString()\n      }),\n      handleAddNewCard: () => {\n        handleModal(StripePaymentForm, {\n          totalPrice: calculatePrice()\n        }, 'add-address-modal stripe-modal');\n      }\n    })]\n  });\n};\n\nexport default Payment;","map":null,"metadata":{},"sourceType":"module"}
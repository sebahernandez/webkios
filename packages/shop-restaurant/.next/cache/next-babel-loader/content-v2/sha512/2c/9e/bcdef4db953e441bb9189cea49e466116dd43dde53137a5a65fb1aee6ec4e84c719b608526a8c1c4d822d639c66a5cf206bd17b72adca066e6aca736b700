{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/components/product-grid/product-list/product-list.tsx\";\nimport React from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport { ProductsRow, ProductsCol, ButtonWrapper, LoaderWrapper, LoaderItem, ProductCardWrapper } from './product-list.style';\nimport { CURRENCY } from 'utils/constant';\nimport { useQuery, NetworkStatus } from '@apollo/client';\nimport Placeholder from 'components/placeholder/placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/no-result/no-result';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'components/button/loadmore-button';\nimport config from '../../../setting/config';\nimport { GET_CATEGORIAS } from 'utils/graphql/query/categorias.query';\nimport { GET_PRODUCTS_X_CATEGORIA } from 'utils/graphql/query/products.query';\nconst ErrorMessage = dynamic(() => import('components/error-message/error-message'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/error-message/error-message')],\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/error-message/error-message']\n  }\n});\nconst GeneralCard = dynamic(() => import('components/product-card/product-card-one/product-card-one'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/product-card/product-card-one/product-card-one')],\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/product-card/product-card-one/product-card-one']\n  }\n});\nconst BookCard = dynamic(() => import('components/product-card/product-card-two/product-card-two'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/product-card/product-card-two/product-card-two')],\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/product-card/product-card-two/product-card-two']\n  }\n});\nconst FurnitureCard = dynamic(() => import('components/product-card/product-card-three/product-card-three'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/product-card/product-card-three/product-card-three')],\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/product-card/product-card-three/product-card-three']\n  }\n});\nconst MedicineCard = dynamic(() => import('components/product-card/product-card-five/product-card-five'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/product-card/product-card-five/product-card-five')],\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/product-card/product-card-five/product-card-five']\n  }\n});\nexport const Products = ({\n  deviceType,\n  fetchLimit = 40,\n  loadMore = true,\n  type\n}) => {\n  const router = useRouter();\n  const cid = config().SUBSCRIPTION_ID;\n  let categoria = \"\";\n  const {\n    query\n  } = useRouter();\n\n  const full = () => {\n    const {\n      data,\n      error,\n      loading,\n      fetchMore,\n      networkStatus\n    } = useQuery(GET_PRODUCTS_X_CATEGORIA, {\n      variables: {\n        clientid: cid,\n        categoria: categoria\n      },\n      notifyOnNetworkStatusChange: true\n    });\n    const loadingMore = networkStatus === NetworkStatus.fetchMore;\n    if (error) return /*#__PURE__*/_jsxDEV(ErrorMessage, {\n      message: error.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }, this);\n\n    if (loading && !loadingMore) {\n      return /*#__PURE__*/_jsxDEV(LoaderWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(LoaderItem, {\n          children: /*#__PURE__*/_jsxDEV(Placeholder, {\n            uniqueKey: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(LoaderItem, {\n          children: /*#__PURE__*/_jsxDEV(Placeholder, {\n            uniqueKey: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(LoaderItem, {\n          children: /*#__PURE__*/_jsxDEV(Placeholder, {\n            uniqueKey: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(LoaderItem, {\n          children: /*#__PURE__*/_jsxDEV(Placeholder, {\n            uniqueKey: \"4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }, this);\n    }\n\n    if (!data || !data.producto || data.producto.length === 0) {\n      return /*#__PURE__*/_jsxDEV(NoResultFound, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 12\n      }, this);\n    }\n\n    const handleLoadMore = () => {\n      fetchMore({\n        variables: {\n          offset: Number(data.producto.length),\n          limit: fetchLimit\n        }\n      });\n    };\n\n    const renderCard = (productType, props) => {\n      switch (productType) {\n        case 'book':\n          return /*#__PURE__*/_jsxDEV(BookCard, {\n            title: props.nombre,\n            image: props.imageURL,\n            name: props === null || props === void 0 ? void 0 : props.nombre,\n            data: props,\n            deviceType: deviceType,\n            onClick: () => {\n              router.push('/product/[slug]', `/product/${props.slug}`);\n\n              if (false) {\n                window.scrollTo(0, 0);\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 11\n          }, this);\n\n        case 'medicine':\n          return /*#__PURE__*/_jsxDEV(MedicineCard, {\n            title: props.title,\n            currency: CURRENCY,\n            image: props.image,\n            price: props.price,\n            weight: props.unit,\n            data: props\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 11\n          }, this);\n\n        case 'furniture':\n          return /*#__PURE__*/_jsxDEV(FurnitureCard, {\n            title: props.title,\n            image: props.gallery[0].url,\n            discountInPercent: props.discountInPercent,\n            data: props,\n            deviceType: deviceType\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 11\n          }, this);\n\n        default:\n          return /*#__PURE__*/_jsxDEV(GeneralCard, {\n            title: props.nombre,\n            description: props === null || props === void 0 ? void 0 : props.descripcion,\n            image: props.imageURL,\n            weight: props.unit,\n            currency: CURRENCY,\n            price: props.precio,\n            salePrice: props.precio_venta,\n            discountInPercent: props.descuento,\n            data: props,\n            deviceType: deviceType\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 11\n          }, this);\n      }\n    };\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(ProductsRow, {\n        children: data.producto.map((item, index) => /*#__PURE__*/_jsxDEV(ProductsCol, {\n          style: type === 'book' ? {\n            paddingLeft: 0,\n            paddingRight: 1\n          } : {},\n          children: /*#__PURE__*/_jsxDEV(ProductCardWrapper, {\n            children: /*#__PURE__*/_jsxDEV(Fade, {\n              duration: 800,\n              delay: index * 10,\n              style: {\n                height: '100%'\n              },\n              children: renderCard(type, item)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 7\n      }, this), loadMore && data.producto.hasMore && /*#__PURE__*/_jsxDEV(ButtonWrapper, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleLoadMore,\n          loading: loadingMore,\n          variant: \"secondary\",\n          style: {\n            fontSize: 14\n          },\n          border: \"1px solid #f1f1f1\",\n          children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n            id: \"loadMoreButton\",\n            defaultMessage: \"Cargar Mas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  };\n\n  let {\n    data: data1,\n    loading: loading1,\n    error: error1\n  } = useQuery(GET_CATEGORIAS, {\n    variables: {\n      clientid: cid\n    },\n    notifyOnNetworkStatusChange: true\n  });\n  if (loading1) return /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 21\n  }, this);\n\n  if (data1) {\n    categoria = query.category === undefined ? data1.categorias[0].name : query.category;\n    console.log('......', categoria, data1.categorias);\n    full();\n  }\n};\nexport default Products;","map":{"version":3,"sources":["/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/components/product-grid/product-list/product-list.tsx"],"names":["React","useRouter","dynamic","ProductsRow","ProductsCol","ButtonWrapper","LoaderWrapper","LoaderItem","ProductCardWrapper","CURRENCY","useQuery","NetworkStatus","Placeholder","Fade","NoResultFound","FormattedMessage","Button","config","GET_CATEGORIAS","GET_PRODUCTS_X_CATEGORIA","ErrorMessage","GeneralCard","BookCard","FurnitureCard","MedicineCard","Products","deviceType","fetchLimit","loadMore","type","router","cid","SUBSCRIPTION_ID","categoria","query","full","data","error","loading","fetchMore","networkStatus","variables","clientid","notifyOnNetworkStatusChange","loadingMore","message","producto","length","handleLoadMore","offset","Number","limit","renderCard","productType","props","nombre","imageURL","push","slug","window","scrollTo","title","image","price","unit","gallery","url","discountInPercent","descripcion","precio","precio_venta","descuento","map","item","index","paddingLeft","paddingRight","height","hasMore","fontSize","data1","loading1","error1","category","undefined","categorias","name","console","log"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport {\n  ProductsRow,\n  ProductsCol,\n  ButtonWrapper,\n  LoaderWrapper,\n  LoaderItem,\n  ProductCardWrapper,\n} from './product-list.style';\nimport {\n  BrowserRouter as Router,\n  Link,\n  useLocation\n} from \"react-router-dom\";\nimport { CURRENCY } from 'utils/constant';\nimport { useQuery, NetworkStatus } from '@apollo/client';\nimport Placeholder from 'components/placeholder/placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/no-result/no-result';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'components/button/loadmore-button';\nimport config from '../../../setting/config';\nimport { GET_PRODUCTS } from 'graphql/query/products.query';\nimport { GET_CATEGORIAS } from 'utils/graphql/query/categorias.query';\nimport { GET_PRODUCTS_X_CATEGORIA } from 'utils/graphql/query/products.query';\n\n\nconst ErrorMessage = dynamic(() =>\n  import('components/error-message/error-message')\n);\n\nconst GeneralCard = dynamic(\n  import('components/product-card/product-card-one/product-card-one')\n);\nconst BookCard = dynamic(\n  import('components/product-card/product-card-two/product-card-two')\n);\nconst FurnitureCard = dynamic(\n  import('components/product-card/product-card-three/product-card-three')\n);\nconst MedicineCard = dynamic(\n  import('components/product-card/product-card-five/product-card-five')\n);\n\n \n\ntype ProductsProps = {\n  deviceType?: {\n    mobile: boolean;\n    tablet: boolean;\n    desktop: boolean;\n  };\n  fetchLimit?: number;\n  loadMore?: boolean;\n  type?: string; \n};\nexport const Products: React.FC<ProductsProps> = ({\n  deviceType,\n  fetchLimit = 40,\n  loadMore = true,\n  type \n}) => {\n  const router = useRouter();\n  const cid =  config().SUBSCRIPTION_ID;\n  let categoria = \"\";\n  const { query } = useRouter();\n  \n  const full = () => {\n\n  const { data, error, loading, fetchMore, networkStatus } = useQuery(\n    GET_PRODUCTS_X_CATEGORIA,\n    {\n      variables: {\n        clientid: cid,\n        categoria: categoria\n      },\n      notifyOnNetworkStatusChange: true,\n    }\n  );\n\n \n\n  const loadingMore = networkStatus === NetworkStatus.fetchMore;\n\n  if (error) return <ErrorMessage message={error.message} />;\n  if (loading && !loadingMore) {\n    return (\n      <LoaderWrapper>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"1\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"2\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"3\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"4\" />\n        </LoaderItem> \n      </LoaderWrapper>\n    );\n  }\n\n  if (!data || !data.producto || data.producto.length === 0) {\n    return <NoResultFound />;\n  }\n  const handleLoadMore = () => {\n    fetchMore({\n      variables: {\n        offset: Number(data.producto.length),\n        limit: fetchLimit,\n      },\n    });\n  };\n\n  const renderCard = (productType, props) => {\n    \n    switch (productType) {\n      case 'book':\n        return (\n          <BookCard\n            title={props.nombre}\n            image={props.imageURL}\n            name={props?.nombre}\n            data={props}\n            deviceType={deviceType}\n            onClick={() => {\n              router.push('/product/[slug]', `/product/${props.slug}`);\n              if (typeof window !== 'undefined') {\n                window.scrollTo(0, 0);\n              }\n            }}\n          />\n        );\n      case 'medicine':\n        return (\n          <MedicineCard\n            title={props.title}\n            currency={CURRENCY}\n            image={props.image}\n            price={props.price}\n            weight={props.unit}\n            data={props}\n          />\n        );\n      case 'furniture':\n        return (\n          <FurnitureCard\n            title={props.title}\n            image={props.gallery[0].url}\n            discountInPercent={props.discountInPercent}\n            data={props}\n            deviceType={deviceType}\n          />\n        );\n      default:\n        return (\n          <GeneralCard\n            title={props.nombre}\n            description={props?.descripcion}\n            image={props.imageURL}\n            weight={props.unit}\n            currency={CURRENCY}\n            price={props.precio}\n            salePrice={props.precio_venta}\n            discountInPercent={props.descuento}\n            data={props}\n            deviceType={deviceType}\n          />\n        );\n    }\n  };\n  return (\n    <>\n      <ProductsRow>\n        {data.producto.map((item: any, index: number) => (\n          <ProductsCol\n            key={index}\n            style={type === 'book' ? { paddingLeft: 0, paddingRight: 1 } : {}}\n          >\n            <ProductCardWrapper>\n              <Fade\n                duration={800}\n                delay={index * 10}\n                style={{ height: '100%' }}\n              >\n                {renderCard(type, item)}\n              </Fade>\n            </ProductCardWrapper>\n          </ProductsCol>\n        ))}\n      </ProductsRow>\n      {loadMore && data.producto.hasMore && (\n        <ButtonWrapper>\n          <Button\n            onClick={handleLoadMore}\n            loading={loadingMore}\n            variant=\"secondary\"\n            style={{\n              fontSize: 14,\n            }}\n            border=\"1px solid #f1f1f1\"\n          >\n            <FormattedMessage id=\"loadMoreButton\" defaultMessage=\"Cargar Mas\" />\n          </Button>\n        </ButtonWrapper>\n      )}\n    </>\n  );\n };\n\n let { data:data1, loading:loading1, error:error1 } = useQuery(\n  GET_CATEGORIAS,\n  {\n    variables: {\n      clientid: cid, \n    },\n    notifyOnNetworkStatusChange: true,\n  }\n);\n\nif(loading1) return <h1>Loading...</h1>\n\nif(data1){\n  categoria = (query.category===undefined?data1.categorias[0].name:query.category);\n  console.log('......',categoria,data1.categorias)\n  full()\n  \n}\n\n\n};\n\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}
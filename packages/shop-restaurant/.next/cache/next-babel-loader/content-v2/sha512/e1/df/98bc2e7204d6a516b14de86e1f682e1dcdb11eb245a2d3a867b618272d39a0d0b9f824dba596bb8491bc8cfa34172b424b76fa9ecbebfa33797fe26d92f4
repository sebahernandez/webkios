{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/Users/alejandrosandoval/space/world_eserp/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/alejandrosandoval/space/world_eserp/web/node_modules/next/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n// product card for general\nimport dynamic from 'next/dynamic';\nimport React from 'react';\nimport Image from 'components/image/image';\nimport { Button } from 'components/button/button';\nimport { ProductCardWrapper, ProductImageWrapper, ProductInfo, DiscountPercent, ButtonText } from '../product-card.style';\nimport { useCart } from 'contexts/cart/use-cart';\nimport { Counter } from 'components/counter/counter';\nimport { cartAnimation } from 'utils/cart-animation';\nimport { FormattedMessage } from 'react-intl';\nimport { CartIcon } from 'assets/icons/CartIcon';\nimport { useModal } from 'contexts/modal/use-modal';\nimport { useRouter } from 'next/router';\nvar QuickViewMobile = dynamic(function () {\n  return import('features/quick-view/quick-view-mobile');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('features/quick-view/quick-view-mobile')];\n    },\n    modules: [\"../components/product-card/product-card-one/product-card-one.tsx -> \" + 'features/quick-view/quick-view-mobile']\n  }\n});\n\nvar ProductCard = function ProductCard(_ref) {\n  var title = _ref.title,\n      image = _ref.image,\n      gallery = _ref.gallery,\n      weight = _ref.weight,\n      price = _ref.price,\n      salePrice = _ref.salePrice,\n      discountInPercent = _ref.discountInPercent,\n      cartProducts = _ref.cartProducts,\n      addToCart = _ref.addToCart,\n      updateCart = _ref.updateCart,\n      value = _ref.value,\n      currency = _ref.currency,\n      onChange = _ref.onChange,\n      increment = _ref.increment,\n      decrement = _ref.decrement,\n      data = _ref.data,\n      deviceType = _ref.deviceType,\n      props = _objectWithoutProperties(_ref, [\"title\", \"image\", \"gallery\", \"weight\", \"price\", \"salePrice\", \"discountInPercent\", \"cartProducts\", \"addToCart\", \"updateCart\", \"value\", \"currency\", \"onChange\", \"increment\", \"decrement\", \"data\", \"deviceType\"]);\n\n  var router = useRouter(); // modal del producto\n\n  var _useModal = useModal(function () {\n    return /*#__PURE__*/_jsx(QuickViewMobile, {\n      modalProps: data,\n      hideModal: hideModal,\n      deviceType: deviceType\n    });\n  }, {\n    onClose: function onClose() {\n      var pathname = router.pathname,\n          query = router.query,\n          asPath = router.asPath;\n      var as = asPath;\n      router.push({\n        pathname: pathname,\n        query: query\n      }, as, {\n        shallow: true\n      });\n    }\n  }),\n      _useModal2 = _slicedToArray(_useModal, 2),\n      showModal = _useModal2[0],\n      hideModal = _useModal2[1];\n\n  var _useCart = useCart(),\n      addItem = _useCart.addItem,\n      removeItem = _useCart.removeItem,\n      getItem = _useCart.getItem,\n      isInCart = _useCart.isInCart;\n\n  var handleAddClick = function handleAddClick(e) {\n    e.stopPropagation();\n    addItem(data);\n\n    if (!isInCart(data.id)) {\n      cartAnimation(e);\n    }\n  };\n\n  var handleRemoveClick = function handleRemoveClick(e) {\n    e.stopPropagation();\n    removeItem(data);\n  };\n\n  var handleQuickViewModal = function handleQuickViewModal() {\n    var pathname = router.pathname,\n        query = router.query;\n    var as = \"/product/\".concat(data.slug);\n\n    if (pathname === '/product/[slug]') {\n      router.push(pathname, as);\n\n      if (true) {\n        window.scrollTo(0, 0);\n      }\n\n      return;\n    }\n\n    showModal();\n    router.push({\n      pathname: pathname,\n      query: query\n    }, {\n      pathname: as\n    }, {\n      shallow: true\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(ProductCardWrapper, {\n    onClick: handleQuickViewModal,\n    className: \"product-card\",\n    children: [/*#__PURE__*/_jsxs(ProductImageWrapper, {\n      children: [/*#__PURE__*/_jsx(Image, {\n        url: image,\n        className: \"product-image\",\n        style: {\n          position: 'relative'\n        },\n        alt: title\n      }), discountInPercent ? /*#__PURE__*/_jsxs(DiscountPercent, {\n        children: [discountInPercent, \"%\"]\n      }) : null]\n    }), /*#__PURE__*/_jsxs(ProductInfo, {\n      children: [/*#__PURE__*/_jsx(\"h3\", {\n        className: \"product-title\",\n        children: title\n      }), /*#__PURE__*/_jsx(\"span\", {\n        className: \"product-weight\",\n        children: weight\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"product-meta\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"productPriceWrapper\",\n          children: [discountInPercent ? /*#__PURE__*/_jsxs(\"span\", {\n            className: \"discountedPrice\",\n            children: [currency, price]\n          }) : null, /*#__PURE__*/_jsxs(\"span\", {\n            className: \"product-price\",\n            children: [currency, salePrice ? salePrice : price]\n          })]\n        }), !isInCart(data.id) ? /*#__PURE__*/_jsxs(Button, {\n          className: \"cart-button\",\n          variant: \"secondary\",\n          borderRadius: 100,\n          onClick: handleAddClick,\n          children: [/*#__PURE__*/_jsx(CartIcon, {\n            mr: 2\n          }), /*#__PURE__*/_jsx(ButtonText, {\n            children: /*#__PURE__*/_jsx(FormattedMessage, {\n              id: \"addCartButton\",\n              defaultMessage: \"Cart\"\n            })\n          })]\n        }) : /*#__PURE__*/_jsx(Counter, {\n          value: getItem(data.id).quantity,\n          onDecrement: handleRemoveClick,\n          onIncrement: handleAddClick,\n          className: \"card-counter\"\n        })]\n      })]\n    })]\n  });\n};\n\nexport default ProductCard;","map":null,"metadata":{},"sourceType":"module"}
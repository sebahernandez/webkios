{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/components/product-grid/product-list/product-list.tsx\";\nimport React from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport { ProductsRow, ProductsCol, ButtonWrapper, LoaderWrapper, LoaderItem, ProductCardWrapper } from './product-list.style';\nimport { CURRENCY } from 'utils/constant';\nimport { useSubscription, NetworkStatus } from '@apollo/client';\nimport Placeholder from 'components/placeholder/placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/no-result/no-result';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'components/button/loadmore-button';\nimport config from '../../../setting/config';\nimport { GET_CATEGORIAS } from 'utils/graphql/query/categorias.query';\nimport { GET_PRODUCTS_X_CATEGORIA } from 'utils/graphql/query/products.query';\nconst ErrorMessage = dynamic(() => import('components/error-message/error-message'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/error-message/error-message')],\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/error-message/error-message']\n  }\n});\nconst GeneralCard = dynamic(() => import('components/product-card/product-card-one/product-card-one'), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('components/product-card/product-card-one/product-card-one')],\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/product-card/product-card-one/product-card-one']\n  }\n});\nexport const Products = ({\n  deviceType,\n  fetchLimit = 40,\n  loadMore = true,\n  type\n}) => {\n  const router = useRouter();\n  const cid = config().SUBSCRIPTION_ID;\n  let categoria = \"\";\n  const {\n    query\n  } = useRouter();\n  let {\n    data: data1,\n    loading: loading1,\n    error: error1\n  } = useSubscription(GET_CATEGORIAS, {\n    variables: {\n      clientid: cid\n    } //notifyOnNetworkStatusChange: true,\n\n  });\n\n  if (data1) {\n    categoria = query.category === undefined ? data1.categorias[0].name : query.category;\n  }\n\n  const {\n    data,\n    error,\n    loading\n  } = useSubscription(GET_PRODUCTS_X_CATEGORIA, {\n    variables: {\n      clientid: cid,\n      categoria: categoria\n    } //notifyOnNetworkStatusChange: true,\n\n  });\n  const loadingMore = networkStatus === NetworkStatus.fetchMore;\n  if (error) return /*#__PURE__*/_jsxDEV(ErrorMessage, {\n    message: error.message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 21\n  }, this);\n\n  if (loading && !loadingMore) {\n    return /*#__PURE__*/_jsxDEV(LoaderWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(LoaderItem, {\n        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n          uniqueKey: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoaderItem, {\n        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n          uniqueKey: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoaderItem, {\n        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n          uniqueKey: \"3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoaderItem, {\n        children: /*#__PURE__*/_jsxDEV(Placeholder, {\n          uniqueKey: \"4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (!data || !data.producto || data.producto.length === 0) {\n    return /*#__PURE__*/_jsxDEV(NoResultFound, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 12\n    }, this);\n  }\n\n  const handleLoadMore = () => {\n    fetchMore({\n      variables: {\n        offset: Number(data.producto.length),\n        limit: fetchLimit\n      }\n    });\n  };\n\n  const renderCard = (productType, props) => {\n    console.log('666:', props.gallery);\n    return /*#__PURE__*/_jsxDEV(GeneralCard, {\n      title: props.nombre,\n      description: props === null || props === void 0 ? void 0 : props.descripcion,\n      image: props.imageURL,\n      gallery: props.gallery,\n      weight: props.unit,\n      currency: CURRENCY,\n      price: props.precio,\n      salePrice: props.precio_venta,\n      discountInPercent: props.descuento,\n      data: props,\n      deviceType: deviceType\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ProductsRow, {\n      children: data.producto.map((item, index) => /*#__PURE__*/_jsxDEV(ProductsCol, {\n        style: type === 'book' ? {\n          paddingLeft: 0,\n          paddingRight: 1\n        } : {},\n        children: /*#__PURE__*/_jsxDEV(ProductCardWrapper, {\n          children: /*#__PURE__*/_jsxDEV(Fade, {\n            duration: 800,\n            delay: index * 10,\n            style: {\n              height: '100%'\n            },\n            children: renderCard(type, item)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), loadMore && data.producto.hasMore && /*#__PURE__*/_jsxDEV(ButtonWrapper, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleLoadMore,\n        loading: loadingMore,\n        variant: \"secondary\",\n        style: {\n          fontSize: 14\n        },\n        border: \"1px solid #f1f1f1\",\n        children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n          id: \"loadMoreButton\",\n          defaultMessage: \"Cargar Mas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\nexport default Products;","map":{"version":3,"sources":["/Users/alejandrosandoval/space/world_eserp/web/packages/shop-restaurant/src/components/product-grid/product-list/product-list.tsx"],"names":["React","useRouter","dynamic","ProductsRow","ProductsCol","ButtonWrapper","LoaderWrapper","LoaderItem","ProductCardWrapper","CURRENCY","useSubscription","NetworkStatus","Placeholder","Fade","NoResultFound","FormattedMessage","Button","config","GET_CATEGORIAS","GET_PRODUCTS_X_CATEGORIA","ErrorMessage","GeneralCard","Products","deviceType","fetchLimit","loadMore","type","router","cid","SUBSCRIPTION_ID","categoria","query","data","data1","loading","loading1","error","error1","variables","clientid","category","undefined","categorias","name","loadingMore","networkStatus","fetchMore","message","producto","length","handleLoadMore","offset","Number","limit","renderCard","productType","props","console","log","gallery","nombre","descripcion","imageURL","unit","precio","precio_venta","descuento","map","item","index","paddingLeft","paddingRight","height","hasMore","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport {\n  ProductsRow,\n  ProductsCol,\n  ButtonWrapper,\n  LoaderWrapper,\n  LoaderItem,\n  ProductCardWrapper,\n} from './product-list.style';\nimport { CURRENCY } from 'utils/constant';\nimport { useQuery, useSubscription,  NetworkStatus } from '@apollo/client';\nimport Placeholder from 'components/placeholder/placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/no-result/no-result';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'components/button/loadmore-button';\nimport config from '../../../setting/config'; \nimport { GET_CATEGORIAS } from 'utils/graphql/query/categorias.query';\nimport { GET_PRODUCTS_X_CATEGORIA } from 'utils/graphql/query/products.query';\n\n\nconst ErrorMessage = dynamic(() =>\n  import('components/error-message/error-message')\n);\n\nconst GeneralCard = dynamic(\n  import('components/product-card/product-card-one/product-card-one')\n);\n \n \n\ntype ProductsProps = {\n  deviceType?: {\n    mobile: boolean;\n    tablet: boolean;\n    desktop: boolean;\n  };\n  fetchLimit?: number;\n  loadMore?: boolean;\n  type?: string; \n};\nexport const Products: React.FC<ProductsProps> = ({\n  deviceType,\n  fetchLimit = 40,\n  loadMore = true,\n  type \n}) => {\n  const router = useRouter();\n  const cid =  config().SUBSCRIPTION_ID;\n  let categoria = \"\";\n  const { query } = useRouter();\n \n  let { data:data1, loading:loading1, error:error1 } = useSubscription(\n    GET_CATEGORIAS,\n    {\n      variables: {\n        clientid: cid, \n      },\n      //notifyOnNetworkStatusChange: true,\n    }\n  );\n  \n  if(data1){ \n    categoria = (query.category===undefined?data1.categorias[0].name:query.category);    \n  }\n   \n  const { data, error, loading  } = useSubscription(\n    GET_PRODUCTS_X_CATEGORIA,\n    {\n      variables: {\n        clientid: cid,\n        categoria: categoria\n      },\n      //notifyOnNetworkStatusChange: true,\n    }\n  );\n\n \n\n  const loadingMore = networkStatus === NetworkStatus.fetchMore;\n\n  if (error) return <ErrorMessage message={error.message} />;\n  if (loading && !loadingMore) {\n    return (\n      <LoaderWrapper>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"1\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"2\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"3\" />\n        </LoaderItem>\n        <LoaderItem>\n          <Placeholder uniqueKey=\"4\" />\n        </LoaderItem> \n      </LoaderWrapper>\n    );\n  }\n\n  if (!data || !data.producto || data.producto.length === 0) {\n    return <NoResultFound />;\n  }\n  const handleLoadMore = () => {\n    fetchMore({\n      variables: {\n        offset: Number(data.producto.length),\n        limit: fetchLimit,\n      },\n    });\n  };\n\n  const renderCard = (productType, props) => {\n        console.log('666:',props.gallery)\n        return (\n          \n          <GeneralCard\n            title={props.nombre}\n            description={props?.descripcion}\n            image={props.imageURL}\n            gallery={props.gallery}\n            weight={props.unit}\n            currency={CURRENCY}\n            price={props.precio}\n            salePrice={props.precio_venta}\n            discountInPercent={props.descuento}\n            data={props}\n            deviceType={deviceType}\n          />\n        );\n    \n  };\n  return (\n    <>\n      <ProductsRow>\n        {data.producto.map((item: any, index: number) => (\n          <ProductsCol\n            key={index}\n            style={type === 'book' ? { paddingLeft: 0, paddingRight: 1 } : {}}\n          >\n            <ProductCardWrapper>\n              <Fade\n                duration={800}\n                delay={index * 10}\n                style={{ height: '100%' }}\n              >\n                {renderCard(type, item)}\n              </Fade>\n            </ProductCardWrapper>\n          </ProductsCol>\n        ))}\n      </ProductsRow>\n      {loadMore && data.producto.hasMore && (\n        <ButtonWrapper>\n          <Button\n            onClick={handleLoadMore}\n            loading={loadingMore}\n            variant=\"secondary\"\n            style={{\n              fontSize: 14,\n            }}\n            border=\"1px solid #f1f1f1\"\n          >\n            <FormattedMessage id=\"loadMoreButton\" defaultMessage=\"Cargar Mas\" />\n          </Button>\n        </ButtonWrapper>\n      )}\n    </>\n  );\n\n};\n\nexport default Products;\n"]},"metadata":{},"sourceType":"module"}
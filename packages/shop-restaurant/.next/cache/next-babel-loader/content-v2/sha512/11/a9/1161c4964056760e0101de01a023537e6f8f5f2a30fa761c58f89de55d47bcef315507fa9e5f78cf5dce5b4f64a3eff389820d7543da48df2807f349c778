{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport { useRouter } from 'next/router';\nimport dynamic from 'next/dynamic';\nimport { ProductsRow, ProductsCol, ButtonWrapper, LoaderWrapper, LoaderItem, ProductCardWrapper } from './product-list.style';\nimport { CURRENCY } from 'utils/constant';\nimport { useQuery, NetworkStatus } from '@apollo/client';\nimport Placeholder from 'components/placeholder/placeholder';\nimport Fade from 'react-reveal/Fade';\nimport NoResultFound from 'components/no-result/no-result';\nimport { FormattedMessage } from 'react-intl';\nimport { Button } from 'components/button/loadmore-button';\nimport config from '../../../setting/config';\nimport { GET_CATEGORIAS } from 'utils/graphql/query/categorias.query';\nimport { GET_PRODUCTS_X_CATEGORIA } from 'utils/graphql/query/products.query';\nvar ErrorMessage = dynamic(function () {\n  return import('components/error-message/error-message');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('components/error-message/error-message')];\n    },\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/error-message/error-message']\n  }\n});\nvar GeneralCard = dynamic(function () {\n  return import('components/product-card/product-card-one/product-card-one');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('components/product-card/product-card-one/product-card-one')];\n    },\n    modules: [\"../components/product-grid/product-list/product-list.tsx -> \" + 'components/product-card/product-card-one/product-card-one']\n  }\n});\nexport var Products = function Products(_ref) {\n  var deviceType = _ref.deviceType,\n      _ref$fetchLimit = _ref.fetchLimit,\n      fetchLimit = _ref$fetchLimit === void 0 ? 40 : _ref$fetchLimit,\n      _ref$loadMore = _ref.loadMore,\n      loadMore = _ref$loadMore === void 0 ? true : _ref$loadMore,\n      type = _ref.type;\n  var router = useRouter();\n  var cid = config().SUBSCRIPTION_ID;\n  var categoria = \"\";\n\n  var _useRouter = useRouter(),\n      query = _useRouter.query;\n\n  var _useQuery = useQuery(GET_CATEGORIAS, {\n    variables: {\n      clientid: cid\n    },\n    notifyOnNetworkStatusChange: true\n  }),\n      data1 = _useQuery.data,\n      loading1 = _useQuery.loading,\n      error1 = _useQuery.error;\n\n  if (data1) {\n    categoria = query.category === undefined ? data1.categorias_view_cid[0].name : query.category;\n  }\n\n  var _useQuery2 = useQuery(GET_PRODUCTS_X_CATEGORIA, {\n    variables: {\n      clientid: cid,\n      categoria: categoria\n    },\n    notifyOnNetworkStatusChange: true\n  }),\n      data = _useQuery2.data,\n      error = _useQuery2.error,\n      loading = _useQuery2.loading,\n      fetchMore = _useQuery2.fetchMore,\n      networkStatus = _useQuery2.networkStatus;\n\n  var loadingMore = networkStatus === NetworkStatus.fetchMore;\n  if (error) return /*#__PURE__*/_jsx(ErrorMessage, {\n    message: error.message\n  });\n\n  if (loading && !loadingMore) {\n    return /*#__PURE__*/_jsxs(LoaderWrapper, {\n      children: [/*#__PURE__*/_jsx(LoaderItem, {\n        children: /*#__PURE__*/_jsx(Placeholder, {\n          uniqueKey: \"1\"\n        })\n      }), /*#__PURE__*/_jsx(LoaderItem, {\n        children: /*#__PURE__*/_jsx(Placeholder, {\n          uniqueKey: \"2\"\n        })\n      }), /*#__PURE__*/_jsx(LoaderItem, {\n        children: /*#__PURE__*/_jsx(Placeholder, {\n          uniqueKey: \"3\"\n        })\n      }), /*#__PURE__*/_jsx(LoaderItem, {\n        children: /*#__PURE__*/_jsx(Placeholder, {\n          uniqueKey: \"4\"\n        })\n      })]\n    });\n  }\n\n  if (!data || !data.producto || data.producto.length === 0) {\n    return /*#__PURE__*/_jsx(NoResultFound, {});\n  }\n\n  var handleLoadMore = function handleLoadMore() {\n    fetchMore({\n      variables: {\n        offset: Number(data.producto.length),\n        limit: fetchLimit\n      }\n    });\n  };\n\n  var renderCard = function renderCard(productType, props) {\n    return /*#__PURE__*/_jsx(GeneralCard, {\n      title: props.nombre,\n      description: props === null || props === void 0 ? void 0 : props.descripcion,\n      image: props.imageURL,\n      gallery: props.gallery,\n      weight: props.unit,\n      currency: CURRENCY,\n      price: props.precio,\n      salePrice: props.precio_venta,\n      discountInPercent: props.descuento,\n      data: props,\n      deviceType: deviceType\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(ProductsRow, {\n      children: data.producto.map(function (item, index) {\n        return /*#__PURE__*/_jsx(ProductsCol, {\n          style: type === 'book' ? {\n            paddingLeft: 0,\n            paddingRight: 1\n          } : {},\n          children: /*#__PURE__*/_jsx(ProductCardWrapper, {\n            children: /*#__PURE__*/_jsx(Fade, {\n              duration: 800,\n              delay: index * 10,\n              style: {\n                height: '100%'\n              },\n              children: renderCard(type, item)\n            })\n          })\n        }, index);\n      })\n    }), loadMore && data.producto.hasMore && /*#__PURE__*/_jsx(ButtonWrapper, {\n      children: /*#__PURE__*/_jsx(Button, {\n        onClick: handleLoadMore,\n        loading: loadingMore,\n        variant: \"secondary\",\n        style: {\n          fontSize: 14\n        },\n        border: \"1px solid #f1f1f1\",\n        children: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"loadMoreButton\",\n          defaultMessage: \"Cargar Mas\"\n        })\n      })\n    })]\n  });\n};\nexport default Products;","map":null,"metadata":{},"sourceType":"module"}
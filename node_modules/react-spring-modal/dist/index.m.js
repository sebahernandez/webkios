import{createPortal as e}from"react-dom";import t from"react-use/lib/useLockBodyScroll";import n,{useEffect as r,useMemo as o,forwardRef as a,useCallback as l,useRef as i}from"react";import{animated as c,useTransition as u}from"react-spring";import{classNames as s}from"@chbphone55/classnames";var m=globalThis.document?document.querySelector("#modal-root"):null;function d(t){var n=t.children,a=o(function(){return globalThis.document?document.createElement("div"):null},[]);return r(function(){return m&&a&&m.appendChild(a),function(){m&&a&&m.removeChild(a)}},[a]),a?e(n,a):null}var f=a(function(e,t){var r=e.className,o=e.onClick,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(e,["className","onClick"]),i=l(function(e){t.current===e.target&&o(e)},[o,t]);return n.createElement(c.div,Object.assign({},{ref:t,onClick:i,className:s("ModalBackdrop",r)},a))});globalThis.document&&require("wicg-inert");var p=null;globalThis.document&&((p=document.getElementById("root"))||(p=document.getElementById("__next")));var v=[],y=new Set;function b(e){var o=e.isOpen,a=e.onRequestClose,l=e.children,c=e.autoFocus;void 0===c&&(c=!0),t(o);var s=i(null),m=i(null);r(function(){var e;o&&m.current?y.has(e=m.current)||(v.forEach(function(e){e.setAttribute("inert","")}),v.push(e),y.add(e)):m.current&&function(e){v=v.filter(function(t){return t!==e}),y.delete(e),v.length&&v[v.length-1].removeAttribute("inert")}(m.current)},[o,m.current]);var b=u(o,null,{"--opacity":0,from:{"--opacity":0},enter:{"--opacity":.5},leave:{"--opacity":0},onRest:function(){if(c&&m.current&&o){var e=m.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e.length&&e[0].focus()}}});return r(function(){function e(e){"Escape"===e.key&&a()}return globalThis.window&&window.addEventListener("keyup",e),function(){globalThis.window&&window.removeEventListener("keyup",e)}},[a]),r(function(){o?(globalThis.document&&(s.current=document.activeElement),p&&p.setAttribute("inert","")):(p&&p.removeAttribute("inert"),setTimeout(function(){s.current&&s.current.focus()},0))},[o]),n.createElement(d,null,b.map(function(e){return e.item?n.createElement(f,{key:e.key,className:"BottomModal__backdrop",style:e.props,onClick:a,"aria-modal":"true",role:"dialog",ref:m},l):null}))}function h(e,t){return void 0===t&&(t={}),u(e,null,Object.assign({},{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}},t))}function g(e){var t=e.isOpen,r=e.onRequestClose,o=e.autoFocus,a=e.className,l=e.modalTransition;void 0===l&&(l=h(t));var i=e.style;void 0===i&&(i={});var u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(e,["isOpen","onRequestClose","autoFocus","className","modalTransition","style"]);return n.createElement(b,{isOpen:t,onRequestClose:r,autoFocus:o},l.map(function(e){return e.item?n.createElement(c.div,Object.assign({},{key:e.key,style:Object.assign({},e.props,i),className:s("CenterModal shadow-lg",a)},u)):null}))}function O(e,t){return void 0===t&&(t={}),u(e,null,Object.assign({},{from:{transform:"translateY(100%) translateX(-50%)"},enter:{transform:"translateY(0%) translateX(-50%)"},leave:{transform:"translateY(100%) translateX(-50%)"}},t))}function k(e){var t=e.children,r=e.isOpen,o=e.autoFocus,a=e.onRequestClose,l=e.className,i=e.modalTransition;void 0===i&&(i=O(r));var u=e.style;void 0===u&&(u={});var m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(e,["children","isOpen","autoFocus","onRequestClose","className","modalTransition","style"]);return n.createElement(b,{isOpen:r,onRequestClose:a,autoFocus:o},i.map(function(e){var r=e.key,o=e.props;return e.item?n.createElement(c.div,Object.assign({},{className:s("BottomModal shadow-lg",l),key:r,style:Object.assign({},o,u)},m),t):null}))}export{d as ModalPortal,f as ModalBackdrop,b as BaseModal,g as CenterModal,h as useCenterModalTransition,k as BottomModal,O as useBottomModalTransition};
//# sourceMappingURL=index.m.js.map
